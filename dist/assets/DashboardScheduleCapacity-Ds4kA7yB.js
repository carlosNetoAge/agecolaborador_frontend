import{d as ee,k as te,a as r,O as B,l as d,q as e,y as I,z as j,J as g,E as a,u as D,W as Z,v as se,F as f,x as P,S as u,A as C,C as S,D as x,K as oe,o as c,M as ae,L as le,G as ne,H as de,N as ce,_ as re}from"./index-BPSdK7vg.js";const ie="/assets/order_warning-CQvWwiF1.png",ue="/assets/order_approval-bze_dPfJ.png",ve="/assets/order_surplus-BGa76hjP.png",_e="/assets/order_all-C1TV9-7P.png",he="/assets/order_rescheduled-BmTKGCY8.png",l=m=>(ne("data-v-3ae6e6a5"),m=m(),de(),m),pe={class:"dashboard__page"},ge={class:"options"},me={class:"navbar"},be={class:"cards"},ye={class:"card"},we=l(()=>e("div",{class:"info"},[e("div",{class:"title"},[e("p",null,"Ordens do dia")]),e("div",{class:"value"},[e("span",null," - "),e("span")])],-1)),fe={class:"icon"},Ce=["src"],Se={class:"card"},xe={class:"info"},ke=l(()=>e("div",{class:"title"},[e("p",null,"Ordens excedentes")],-1)),Ae={class:"value"},Oe=l(()=>e("span",null,null,-1)),Te={class:"icon"},$e=["src"],Be={class:"card"},De={class:"info"},Pe=l(()=>e("div",{class:"title"},[e("p",null,"Ordens aprovadas")],-1)),Le={class:"value"},ze=l(()=>e("span",null,null,-1)),Re={class:"icon"},Ve=["src"],Fe={class:"card"},Ie={class:"info"},je=l(()=>e("div",{class:"title"},[e("p",null,"Ordens reagendadas")],-1)),Ze={class:"value"},Me=l(()=>e("span",null,null,-1)),Ne={class:"icon"},Ue=["src"],Ee={class:"card"},Ge={class:"info"},qe=l(()=>e("div",{class:"title"},[e("p",null,"Ordens pendentes")],-1)),Ye={class:"value"},He=l(()=>e("span",null,null,-1)),Je={class:"icon"},Ke=["src"],We={class:"actions"},Qe={class:"search"},Xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 513.749 513.749",style:{"enable-background":"new 0 0 513.749 513.749"},"xml:space":"preserve",width:"512",height:"512"},et=l(()=>e("g",null,[e("path",{d:"M504.352,459.061l-99.435-99.477c74.402-99.427,54.115-240.344-45.312-314.746S119.261-9.277,44.859,90.15   S-9.256,330.494,90.171,404.896c79.868,59.766,189.565,59.766,269.434,0l99.477,99.477c12.501,12.501,32.769,12.501,45.269,0   c12.501-12.501,12.501-32.769,0-45.269L504.352,459.061z M225.717,385.696c-88.366,0-160-71.634-160-160s71.634-160,160-160   s160,71.634,160,160C385.623,314.022,314.044,385.602,225.717,385.696z"})],-1)),tt=[et],st={class:"period"},ot={class:"status"},at=ce('<option value="all" data-v-3ae6e6a5>Todos</option><option value="surplus" data-v-3ae6e6a5>Excedentes</option><option value="approved" data-v-3ae6e6a5>Aprovado</option><option value="rescheduled" data-v-3ae6e6a5>Reagendas</option><option value="pending" data-v-3ae6e6a5>Pendentes</option>',5),lt=[at],nt=l(()=>e("div",{class:"clear"},[e("button",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24"},[e("path",{d:"m17,0c-3.86,0-7,3.14-7,7s3.14,7,7,7,7-3.14,7-7S20.86,0,17,0Zm0,12c-2.757,0-5-2.243-5-5s2.243-5,5-5,5,2.243,5,5-2.243,5-5,5Zm2.957-6.543l-1.543,1.543,1.543,1.543-1.414,1.414-1.543-1.543-1.543,1.543-1.414-1.414,1.543-1.543-1.543-1.543,1.414-1.414,1.543,1.543,1.543-1.543,1.414,1.414Zm-7.957,9.025c.616.412,1.289.743,2,.995v8.523l-6-4.5v-5.12L0,5.38v-2.38C0,1.346,1.346,0,3,0h8.349c-.706.571-1.325,1.244-1.831,2H3c-.551,0-1,.449-1,1v1.62l8,9v4.88l2,1.5v-5.518Z"})])])],-1)),dt={class:"table_orders"},ct=l(()=>e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"left"}},"Protocolo"),e("th",null,"Tipo"),e("th",{style:{"text-align":"left"}},"Serviço"),e("th",null,"Agendamento"),e("th",null,"Período"),e("th",{style:{"text-align":"left"}},"Status"),e("th",null,"Localidade"),e("th",null,"Aberta por"),e("th",null,"Setor"),e("th",null,"Solicitante"),e("th",null,"Aprovado por"),e("th",null,"Ações")])],-1)),rt={style:{"text-align":"left"}},it={style:{"text-align":"left"}},ut={class:"status"},vt=l(()=>e("td",null,null,-1)),_t=["onClick"],ht=l(()=>e("svg",{class:"actions_order",xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:"512",height:"512"},[e("circle",{cx:"12",cy:"2",r:"2"}),e("circle",{cx:"12",cy:"12",r:"2"}),e("circle",{cx:"12",cy:"22",r:"2"})],-1)),pt=[ht],gt={key:0,class:"modal"},mt={class:"card"},bt={class:"close__btn"},yt=l(()=>e("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),wt=[yt],ft=l(()=>e("h1",null,"Gerenciamento da Ordem de Serviço",-1)),Ct={class:"info"},St=l(()=>e("b",null,"Protocolo:",-1)),xt=l(()=>e("b",null,"Servico:",-1)),kt=l(()=>e("b",null,"Tipo de serviço:",-1)),At=l(()=>e("b",null,"Agendamento:",-1)),Ot=l(()=>e("b",null,"Periodo:",-1)),Tt=l(()=>e("b",null,"Status:",-1)),$t=l(()=>e("b",null,"Localidade:",-1)),Bt={class:"options"},Dt={key:1,class:"reschedule_modal"},Pt={class:"card"},Lt={class:"close__btn"},zt=l(()=>e("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),Rt=[zt],Vt=l(()=>e("h1",null,"Reagendar Ordem de Serviço",-1)),Ft={class:"days"},It={class:"day"},jt={class:"infoDay"},Zt={class:"period"},Mt=["onClick"],Nt={class:"reschedule-button"},Ut=ee({__name:"DashboardScheduleCapacity",setup(m){const M=te(),L=r({}),N=()=>{M.setInfoPage({title:"Agenda Técnica Aniel",subtitle:"Aprove o excedente de ordens de serviço que não entraram no sistema por limitação do capacity."})};r("all");const _=r([]),k=new Date,U=k.getFullYear(),E=String(k.getMonth()+1).padStart(2,"0"),G=String(k.getDate()).padStart(2,"0"),q=`${U}-${E}-${G}`,A=r(q),O=r(""),p=r("all"),n=r([]),h=r(!1),b=r(!1),T=r(""),z=r([]),y=()=>{S({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/dashboard",method:"GET",params:{period:A.value},headers:{"Content-Type":"application/json",Authorization:"Bearer "+x.get("token")}}).then(o=>{_.value=o.data}).catch(o=>{console.log(o)})},Y=o=>{S({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/approval-order",method:"POST",data:{order:o},headers:{"Content-Type":"application/json",Authorization:"Bearer "+x.get("token")}}).then(t=>{console.log(t),y(),h.value=!1,n.value=[]}).catch(t=>{console.log(t)})},R=B(()=>_.value.reduce((o,t)=>{const i=t.status_order.filter(s=>s.id===15).length;return o+i},0)),V=B(()=>_.value.reduce((o,t)=>{const i=t.status_order.filter(s=>s.id===16).length;return o+i},0)),H=B(()=>{const o=O.value.toString().toLowerCase();return _.value.filter(t=>{const i=t.protocolo.toLowerCase().includes(o);let s=!0;return p.value==="approved"?s=t.status_order[0].id===15:p.value==="rescheduled"?s=t.status_order[0].id===16:p.value==="pending"&&(s=t.status_order[0].id!==15&&t.status_order[0].id!==16),i&&s})}),J=()=>{b.value=!0,S({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/capacity/reschedule",method:"get",params:{typeService:n.value.servico},headers:{"Content-Type":"application/json",Authorization:"Bearer "+x.get("token")}}).then(o=>{z.value=o.data}).catch(o=>{console.log(o)})},K=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],W=o=>{const t=new Date(o),i=t.getUTCDate(),s=K[t.getUTCMonth()],v=t.getUTCFullYear();return`${i} de ${s} de ${v}`},w=r({date:"",period:"",order:n.value.protocolo}),Q=(o,t)=>{w.value={date:o,period:t,order:n.value.protocolo},T.value=`${o} ${t}`},X=()=>{S({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/reschedule-order",method:"post",data:{order:w.value.order,period:w.value.period,date:w.value.date},headers:{"Content-Type":"application/json",Authorization:"Bearer "+x.get("token")}}).then(o=>{y(),b.value=!1,h.value=!1,n.value=[]}).catch(o=>{console.log(o)})};return y(),N(),(o,t)=>{const i=oe("router-link");return c(),d(f,null,[e("div",pe,[e("div",ge,[e("div",me,[I(i,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel",onClick:t[0]||(t[0]=s=>L.value="operational")},{default:j(()=>[u("Operacional")]),_:1}),I(i,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/dashboard",onClick:t[1]||(t[1]=s=>L.value="dashboard")},{default:j(()=>[u("Dashboard")]),_:1})])]),e("div",be,[e("div",ye,[we,e("div",fe,[e("img",{src:g(_e),alt:""},null,8,Ce)])]),e("div",Se,[e("div",xe,[ke,e("div",Ae,[e("span",null,a(_.value.length),1),Oe])]),e("div",Te,[e("img",{src:g(ve),alt:""},null,8,$e)])]),e("div",Be,[e("div",De,[Pe,e("div",Le,[e("span",null,a(R.value),1),ze])]),e("div",Re,[e("img",{src:g(ue),alt:""},null,8,Ve)])]),e("div",Fe,[e("div",Ie,[je,e("div",Ze,[e("span",null,a(V.value),1),Me])]),e("div",Ne,[e("img",{src:g(he),alt:""},null,8,Ue)])]),e("div",Ee,[e("div",Ge,[qe,e("div",Ye,[e("span",null,a(_.value.length-R.value-V.value),1),He])]),e("div",Je,[e("img",{src:g(ie),alt:""},null,8,Ke)])])]),e("div",We,[e("div",Qe,[(c(),d("svg",Xe,tt)),D(e("input",{type:"number",placeholder:"Pesquisar (Protocolo)","onUpdate:modelValue":t[2]||(t[2]=s=>O.value=s)},null,512),[[Z,O.value]])]),e("div",st,[D(e("input",{type:"date",name:"period","onUpdate:modelValue":t[3]||(t[3]=s=>A.value=s),onChange:y},null,544),[[Z,A.value]])]),e("div",ot,[D(e("select",{name:"status",id:"status","onUpdate:modelValue":t[4]||(t[4]=s=>p.value=s)},lt,512),[[se,p.value]])]),nt]),e("div",dt,[e("table",null,[ct,e("tbody",null,[(c(!0),d(f,null,P(H.value,(s,v)=>(c(),d("tr",{key:v},[e("td",rt,"# "+a(s.protocolo),1),e("td",null,a(s.servico),1),e("td",it,a(s.subservico),1),e("td",null,a(s.hora_agendamento),1),e("td",null,a(s.periodo),1),e("td",null,[e("div",ut,[e("div",{class:"badge",style:ae({backgroundColor:s.status_order[0].cor_indicativa})},null,4),e("span",null,a(s.status_order[0].titulo),1)])]),e("td",null,a(s.localidade),1),e("td",null,a(s.aberta_por),1),e("td",null,a(s.setor),1),vt,e("td",null,a(s.aprovador),1),e("td",null,[s.status_order[0].id!=15?(c(),d("div",{key:0,style:{cursor:"pointer"},onClick:F=>[n.value=s,h.value=!0]},pt,8,_t)):C("",!0)])]))),128))])])])]),h.value?(c(),d("div",gt,[e("div",mt,[e("div",bt,[(c(),d("svg",{onClick:t[5]||(t[5]=s=>h.value=!1),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},wt))]),ft,e("div",Ct,[e("p",null,[St,u(" #"+a(n.value.protocolo),1)]),e("p",null,[xt,u(" "+a(n.value.servico),1)]),e("p",null,[kt,u(" "+a(n.value.subservico),1)]),e("p",null,[At,u(" "+a(n.value.hora_agendamento),1)]),e("p",null,[Ot,u(" "+a(n.value.periodo),1)]),e("p",null,[Tt,u(" "+a(n.value.status_order[0].titulo),1)]),e("p",null,[$t,u(" "+a(n.value.localidade),1)])]),e("div",Bt,[e("button",{onClick:t[6]||(t[6]=s=>Y(n.value.protocolo)),style:{"background-color":"#11B15B"}},"Aprovar entrada"),e("button",{onClick:t[7]||(t[7]=s=>J()),style:{"background-color":"#5E78FF"}},"Reagendar OS")])])])):C("",!0),h.value&&b.value?(c(),d("div",Dt,[e("div",Pt,[e("div",Lt,[(c(),d("svg",{onClick:t[8]||(t[8]=s=>b.value=!1),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},Rt))]),Vt,e("div",Ft,[(c(!0),d(f,null,P(z.value||[],(s,v)=>(c(),d("div",It,[e("div",jt,[e("p",null,a(s.dayName)+", "+a(W(v)),1)]),e("div",Zt,[(c(!0),d(f,null,P(s.period||[],(F,$)=>(c(),d("button",{onClick:Et=>Q(v,$),class:le({selected:T.value==v+" "+$,disable:F.status!="aberta"})},a($),11,Mt))),256))])]))),256))]),e("div",Nt,[T.value!=""?(c(),d("button",{key:0,onClick:t[9]||(t[9]=s=>X(o.index,o.periodName))}," Reagendar ordem de serviço # "+a(n.value.protocolo),1)):C("",!0)])])])):C("",!0)],64)}}}),qt=re(Ut,[["__scopeId","data-v-3ae6e6a5"]]);export{qt as default};
