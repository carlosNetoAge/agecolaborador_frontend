import{d as te,r as u,a as le,c as d,b as e,t as i,F as V,f as J,j as h,u as c,A as N,k as q,o as r,q as G,p as oe,l as se,E as _,_ as ae,B as ge,i as be,z as $e,g as ce,h as re,e as E,G as de,v as Y,n as ye,y as Ce}from"./index-Cju-jsZt.js";import{s as K,t as xe}from"./technician-ToY7zxws.js";const H="/assets/confirm-Bt6C-TPo.png",Q="/assets/pending-DiSv79qu.png",fe="/assets/not_sending-Ca5jW9XR.png",Ae="/assets/place-DROFwzNo.png",ee="/assets/service-BekhWjbd.png",Se="/assets/approval-CzNgNMl0.png",we="/assets/pre_approval-BiIaNcZA.png",ke="/assets/register-BoRrDKH9.png",j="/assets/star_full-oLyS9BV2.png",De="/assets/protocol-BbJrHlA1.png",Te="/assets/send_confirm-CwjlG5nR.png",Oe="/assets/car_displacement-CMwsrYQa.png",Be="/assets/identify-DzPAtZ3C.png",Ie="/assets/cellphone-BjqW_nkd.png",Pe="/assets/email-ap9XjAHx.png",Re="/assets/contract-D_d7mlHp.png",Fe="/assets/address-BMauXCqH.png",Me="/assets/number_plate-oApmADCB.png",Le="/assets/neighborhood-BGmSbVdo.png",Ve="/assets/city-DrwU6BxR.png",Ne="/assets/copy-xWBjRDqc.png",W="/assets/danger-DW5lSG0a.png",ie="/assets/robot1-Dc3gIuFt.gif",X="/assets/robot2-D5CtTLvG.gif",ue="/assets/robot3-1G7Gn0O2.gif",qe="/assets/robot4-BT3ddV76.gif",_e="/assets/robot5-B6V-NKFN.gif",pe="/assets/404-fgU35mnD.gif",ve="/assets/remove-folder-BRoukl1d.gif",he="/assets/watcher-DYxaW94p.gif",me="/assets/question-oR38NTwc.gif",w=m=>(oe("data-v-dd228184"),m=m(),se(),m),ze={class:"reschedule_modal"},Ze={class:"card"},Ee={class:"close__btn"},je=w(()=>e("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),Ge=[je],He={key:0,class:"days"},Ue={class:"day"},We={class:"infoDay"},Ye={class:"period"},Xe=["onClick","disabled"],Je={class:"reschedule-button"},Ke={key:0,class:"loading"},Qe={class:"card_loading"},et={key:0,class:"content_loading",id:"loading_1"},tt=["src"],ot=w(()=>e("h3",null,[e("b",null,"Por favor, aguarde... "),e("br"),_("Estou procurando por sua ordem de serviço")],-1)),st={key:1,class:"content_loading",id:"loading_2"},at=["src"],nt=w(()=>e("h3",null,[e("b",null,"Encontrei!"),_(),e("br"),_("Deixa que essa eu resolvo!")],-1)),lt={key:2,class:"content_loading",id:"loading_3"},ct=["src"],rt=w(()=>e("h3",null,[e("b",null,"Clica aqui... Clica ali..."),_(),e("br"),_("Estou alterando a data do agendamento, um momento...")],-1)),dt={key:3,class:"content_loading",id:"loading_4"},it=["src"],ut=w(()=>e("h3",null,[e("b",null,"Limpando a agenda do técnico..."),_(),e("br"),_("Tenho que fazer tudo por aqui mesmo?")],-1)),_t={key:4,class:"content_loading",id:"loading_4"},pt=["src"],vt=w(()=>e("h3",null,[e("b",null,"Dedurando você..."),_(),e("br"),_("Q-quer dizer... Registrando o log de alteração")],-1)),ht={key:5,class:"content_loading",id:"loading_4"},mt=["src"],gt=w(()=>e("h3",null,[e("b",null,"Eu recebo por isso?"),_(),e("br"),_("Bem que eu gostaria de mais armazenamento...")],-1)),ft={key:6,class:"content_loading",id:"loading_5"},bt=["src"],$t=w(()=>e("h3",null,[e("b",null,"Verificando status..."),_(),e("br"),_("Se algo deu errado, a culpa é do desenvolvedor...")],-1)),yt={key:7,class:"content_loading",id:"loading_6"},Ct=["src"],xt=w(()=>e("h3",null,[e("b",null,"Tudo certo!"),_(),e("br"),_("Se precisar, estou por aqui.")],-1)),At={key:8,class:"content_loading",id:"loading_6"},St=["src"],wt=w(()=>e("h3",null,[e("b",null,"Algo deu errado!"),_(),e("br"),_("Acione o time de desenvolvimento.")],-1)),kt=te({__name:"RescheduleOrderOperational",props:{dataOs:{}},emits:["closeModal"],setup(m,{emit:z}){const F=z,k=()=>{F("closeModal")},b=m,t=u(""),$=u([]),y=u(!0),g=()=>{y.value=!0,N({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/capacity/reschedule",method:"get",params:{typeService:b.dataOs.servico},headers:{"Content-Type":"application/json",Authorization:"Bearer "+q.get("token")}}).then(f=>{$.value=f.data,y.value=!1}).catch(f=>{console.log(f)})},Z=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],D=f=>{const v=new Date(f),x=v.getUTCDate(),s=Z[v.getUTCMonth()],o=v.getUTCFullYear();return`${x} de ${s} de ${o}`},T=u({date:"",period:"",order:""}),M=(f,v)=>{T.value={date:f,period:v,order:b.dataOs.protocolo},t.value=`${f} ${v}`};le(()=>{g()});const C=u(!1),O=u(!1),U=()=>{C.value=!0,B(),N({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-order/actions/reschedule",method:"POST",data:{protocol:T.value.order,date:T.value.date,period:T.value.period},headers:{"Content-Type":"application/json",Authorization:"Bearer "+q.get("token")}}).then(()=>{p.value=8,setTimeout(()=>{C.value=!1,k()},3e3)}).catch(()=>{p.value=10,O.value=!0,setTimeout(()=>{C.value=!1,k()},3e3)})},p=u(1),B=()=>{setInterval(()=>{p.value<7&&p.value++},4e3)},L=()=>{[ie,X,ue,qe,_e,pe,ve,he,me].forEach(v=>{const x=new Image;x.src=v})};return le(()=>{L(),g()}),(f,v)=>(r(),d(V,null,[e("div",ze,[e("div",Ze,[e("div",Ee,[(r(),d("svg",{onClick:v[0]||(v[0]=x=>k()),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},Ge))]),e("h3",null,"Datas disponíveis para reagendar o protocolo #"+i(b.dataOs.protocolo),1),y.value?h("",!0):(r(),d("div",He,[(r(!0),d(V,null,J($.value,(x,s)=>(r(),d("div",Ue,[e("div",We,[e("p",null,i(x.dayName)+", "+i(D(s)),1)]),e("div",Ye,[(r(!0),d(V,null,J(x.period||[],(o,l)=>(r(),d("button",{onClick:n=>M(s,l),class:G({selected:t.value==s+" "+l,disable:o.status!="aberta"}),disabled:o.status!="aberta"},i(l),11,Xe))),256))])]))),256))])),e("div",Je,[t.value!=""?(r(),d("button",{key:0,onClick:v[1]||(v[1]=x=>U())}," Reagendar ordem de serviço # "+i(b.dataOs.protocolo),1)):h("",!0)])])]),C.value?(r(),d("div",Ke,[e("div",Qe,[p.value==1?(r(),d("div",et,[e("img",{src:c(ie),alt:"Carregando..."},null,8,tt),ot])):h("",!0),p.value==2?(r(),d("div",st,[e("img",{src:c(X),alt:"Carregando..."},null,8,at),nt])):h("",!0),p.value==3?(r(),d("div",lt,[e("img",{src:c(ue),alt:"Carregando..."},null,8,ct),rt])):h("",!0),p.value==4?(r(),d("div",dt,[e("img",{src:c(ve),alt:"Carregando..."},null,8,it),ut])):h("",!0),p.value==5?(r(),d("div",_t,[e("img",{src:c(he),alt:"Carregando..."},null,8,pt),vt])):h("",!0),p.value==6?(r(),d("div",ht,[e("img",{src:c(me),alt:"Carregando..."},null,8,mt),gt])):h("",!0),p.value==7?(r(),d("div",ft,[e("img",{src:c(_e),alt:"Carregando..."},null,8,bt),$t])):h("",!0),p.value==8?(r(),d("div",yt,[e("img",{src:c(X),alt:"Carregando..."},null,8,Ct),xt])):h("",!0),O.value?(r(),d("div",At,[e("img",{src:c(pe),alt:"Carregando..."},null,8,St),wt])):h("",!0)])])):h("",!0)],64))}}),Dt=ae(kt,[["__scopeId","data-v-dd228184"]]),A=m=>(oe("data-v-4db38845"),m=m(),se(),m),Tt={class:"modal"},Ot={class:"card"},Bt={class:"close__btn"},It=A(()=>e("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),Pt=[It],Rt=A(()=>e("h3",null,"Informações sobre a ordem de serviço",-1)),Ft={class:"content__info"},Mt={key:0,class:"info"},Lt=A(()=>e("tr",null,[e("th",null," Nome "),e("th",null,"Celular"),e("th",null,"E-mail"),e("th",null,"Contrato")],-1)),Vt={class:"flex"},Nt=["src"],qt={class:"flex"},zt=["src"],Zt={class:"flex"},Et=["src"],jt={class:"flex"},Gt=["src"],Ht=A(()=>e("tr",null,[e("th",null,"Endereço"),e("th",null,"Número"),e("th",null,"Bairro"),e("th",null,"Cidade")],-1)),Ut={class:"flex"},Wt=["src"],Yt={class:"flex"},Xt=["src"],Jt={class:"flex"},Kt=["src"],Qt={class:"flex"},eo=["src"],to={key:1,class:"info_service"},oo=A(()=>e("tr",null,[e("th",null,"Serviço"),e("th",null,"Sub Serviço"),e("th",null,"Protocolo"),e("th",null,"Status")],-1)),so={class:"flex"},ao=["src"],no={class:"flex"},lo=["src"],co={class:"flex"},ro=["src"],io={class:"flex"},uo=["src"],_o=A(()=>e("tr",null,[e("th",null,"Agendamento"),e("th",null,"Atendimento"),e("th",null,"Deslocamento"),e("th",null,"Nota do atendimento")],-1)),po={class:"flex"},vo=["src"],ho={class:"flex"},mo=["src"],go={class:"flex"},fo=["src"],bo={class:"flex"},$o=["src"],yo=["src"],Co=["src"],xo=["src"],Ao=["src"],So={key:2,class:"actions"},wo=A(()=>e("h4",null,"Ações disponíveis",-1)),ko={class:"buttons"},Do=["disabled"],To=["src"],Oo=A(()=>e("span",null,"Enviar confirmação",-1)),Bo=["disabled"],Io=["src"],Po=A(()=>e("span",null,"Aprovar",-1)),Ro=["disabled"],Fo=["src"],Mo=A(()=>e("span",null,"Solicitar aprovação",-1)),Lo=["disabled"],Vo=["src"],No=A(()=>e("span",null,"Reagendar",-1)),qo=["src"],zo=A(()=>e("span",null,"Copiar informações",-1)),Zo={disabled:"",class:"disabled-button"},Eo=["src"],jo=A(()=>e("span",null,"Histórico",-1)),Go=te({__name:"OptionsSchedule",props:{osInfo:{},permissions:{}},emits:["closeModal"],setup(m,{emit:z}){const F=z,k=m,b=u(k.osInfo),t=u({}),$=u(k.permissions),y=u(!1),g=u({sendConfirm:!1,approval:!1,preApproval:!1,reschedule:!1,copy:!1,register:!1}),Z=()=>{F("closeModal")},D=()=>{N({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-order/data",method:"get",headers:{Authorization:"Bearer "+q.get("token")},params:{protocol:b.value.protocolo}}).then(s=>{t.value=s.data,g.value.sendConfirm=f(),g.value.approval=U(),g.value.preApproval=p()}).catch(s=>{console.error(s)})};D();const T=s=>{const o=`*Nome:* ${s.cliente_nome},
*Celular:* ${s.celular_1},
*Contrato:* ${s.contrato_id},
*Endereço:* ${s.endereco}, ${s.numero}, ${s.area_despacho}, ${s.cidade}/DF,
*Serviço:* ${s.sub_servico},
*Protocolo:* ${s.protocolo},
*Agendamento:* ${M(s.data_agendamento)}`;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(o).then(()=>{}).catch(l=>{console.error("Erro ao copiar para a área de transferência: ",l)});else{const l=document.createElement("textarea");l.value=o,document.body.appendChild(l),l.select();try{document.execCommand("copy")}catch(n){console.error("Erro ao copiar para a área de transferência: ",n)}document.body.removeChild(l)}},M=s=>{const o=new Date(s),l=String(o.getDate()).padStart(2,"0"),n=String(o.getMonth()+1).padStart(2,"0"),I=o.getFullYear(),a=String(o.getHours()).padStart(2,"0"),P=String(o.getMinutes()).padStart(2,"0"),R=String(o.getSeconds()).padStart(2,"0");return`${l}/${n}/${I} ${a}:${P}:${R}`},C=s=>{switch(s){case"Confirmado":return{src:H,alt:"confirmado",text:"Confirmado"};case"Pendente":return{src:fe,alt:"pendente",text:"Pendente"};case"Atendente":return{src:H,alt:"Confirmado",text:"Confirmado"};default:return{src:Q,alt:"não enviado",text:"Não enviado"}}},O=s=>({"Fechada Produtiva":H,"Fechada Improdutiva":W,"OS em Deslocamento":Oe,"Transbordo da capacidade":W,"Agenda fechada":W,"Fora do período":W})[s]||Q,U=()=>{const o=["Transbordo da capacidade","Agenda fechada","Fora do período"].includes(t.value.status),l=$.value.approval;return o&&l},p=()=>{const o=["Transbordo da capacidade","Agenda fechada","Fora do período"].includes(t.value.status),l=$.value.preApproval;return console.log(o,$.value),o&&l},B=u(!1),L=s=>["OS em Deslocamento","Atendimento Iniciado","Fora do período","Transbordo da capacidade","Agenda fechada","Aberta Aguardando Responsável","Aberta Aguardando Agendamento","Aberta Aguardando Atendimento"].includes(s)&&!B.value,f=()=>{const s=["Confirmado","Pendente","Atendente"],o=!s.includes(t.value.confirmacao_cliente),l=!s.includes(t.value.confirmacao_deslocamento),n=t.value.status=="Aberta Aguardando Atendimento";return o&&l&&n},v=()=>{N({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-order/send/confirm ",method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+q.get("token")},data:{protocol:b.value.protocolo}}).then(s=>{D()}).catch(s=>{console.error(s)})},x=()=>{N({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/approval-order",method:"POST",data:{order:t.value.protocolo},headers:{"Content-Type":"application/json",Authorization:"Bearer "+q.get("token")}}).then(s=>{D()}).catch(s=>{console.error(s)})};return(s,o)=>(r(),d(V,null,[e("div",Tt,[e("div",Ot,[e("div",Bt,[(r(),d("svg",{onClick:Z,xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},Pt))]),Rt,e("div",Ft,[t.value.protocolo?(r(),d("div",Mt,[e("table",null,[Lt,e("tr",null,[e("td",null,[e("div",Vt,[e("img",{src:c(Be),alt:"calendar"},null,8,Nt),e("span",null,i(t.value.cliente_nome),1)])]),e("td",null,[e("div",qt,[e("img",{src:c(Ie),alt:"calendar"},null,8,zt),e("span",null,i(t.value.celular_1),1)])]),e("td",null,[e("div",Zt,[e("img",{src:c(Pe),alt:"calendar"},null,8,Et),e("span",null,i(t.value.email),1)])]),e("td",null,[e("div",jt,[e("img",{src:c(Re),alt:"contrato"},null,8,Gt),e("span",null,i(t.value.contrato_id),1)])])]),Ht,e("tr",null,[e("td",null,[e("div",Ut,[e("img",{src:c(Fe),alt:"endereço"},null,8,Wt),e("span",null,i(t.value.endereco),1)])]),e("td",null,[e("div",Yt,[e("img",{src:c(Me),alt:"número"},null,8,Xt),e("span",null,i(t.value.numero),1)])]),e("td",null,[e("div",Jt,[e("img",{src:c(Le),alt:"número"},null,8,Kt),e("span",null,i(t.value.area_despacho),1)])]),e("td",null,[e("div",Qt,[e("img",{src:c(Ve),alt:"número"},null,8,eo),e("span",null,i(t.value.cidade)+" - DF",1)])])])])])):h("",!0),t.value.protocolo?(r(),d("div",to,[e("table",null,[oo,e("tr",null,[e("td",null,[e("div",so,[e("img",{src:c(ee),alt:"calendar"},null,8,ao),e("span",null,i(t.value.servico),1)])]),e("td",null,[e("div",no,[e("img",{src:c(ee),alt:"calendar"},null,8,lo),e("span",null,i(t.value.sub_servico),1)])]),e("td",null,[e("div",co,[e("img",{src:c(De),alt:"calendar"},null,8,ro),e("span",null,i(t.value.protocolo),1)])]),e("td",null,[e("div",io,[e("img",{src:O(b.value.status),alt:"calendar"},null,8,uo),e("span",null,i(t.value.status),1)])])]),_o,e("tr",null,[e("td",null,[e("div",po,[e("img",{src:c(K),alt:"calendar"},null,8,vo),e("span",null,i(M(t.value.data_agendamento)),1)])]),e("td",null,[e("div",ho,[e("img",{src:C(t.value.confirmacao_cliente).src,alt:"calendar"},null,8,mo),e("span",null,i(C(t.value.confirmacao_cliente).text),1)])]),e("td",null,[e("div",go,[e("img",{src:C(t.value.confirmacao_deslocamento).src,alt:"calendar"},null,8,fo),e("span",null,i(C(t.value.confirmacao_deslocamento).text),1)])]),e("td",null,[e("div",bo,[e("img",{src:c(j),alt:"star"},null,8,$o),e("img",{src:c(j),alt:"star"},null,8,yo),e("img",{src:c(j),alt:"star"},null,8,Co),e("img",{src:c(j),alt:"star"},null,8,xo),e("img",{src:c(j),alt:"star"},null,8,Ao)])])])])])):h("",!0),t.value.protocolo?(r(),d("div",So,[wo,e("div",ko,[e("button",{onClick:o[0]||(o[0]=l=>v()),disabled:!g.value.sendConfirm,class:G({"disabled-button":!g.value.sendConfirm})},[e("img",{src:c(Te),alt:"enviar confirmação"},null,8,To),Oo],10,Do),e("button",{onClick:o[1]||(o[1]=l=>x()),disabled:!g.value.approval,class:G({"disabled-button":!g.value.approval})},[e("img",{src:c(Se),alt:"aprovar os"},null,8,Io),Po],10,Bo),e("button",{onClick:o[2]||(o[2]=()=>{}),disabled:!g.value.preApproval,class:G({"disabled-button":!g.value.preApproval})},[e("img",{src:c(we),alt:"aprovar os"},null,8,Fo),Mo],10,Ro),e("button",{onClick:o[3]||(o[3]=l=>y.value=!0),disabled:!L(t.value.status),class:G({"disabled-button":!L(t.value.status)})},[e("img",{src:c(K),alt:"reagendar os"},null,8,Vo),No],10,Lo),e("button",{onClick:o[4]||(o[4]=l=>T(t.value))},[e("img",{src:c(Ne),alt:"copiar"},null,8,qo),zo]),e("button",Zo,[e("img",{src:c(ke),alt:"histórico"},null,8,Eo),jo])])])):h("",!0)])])]),y.value?(r(),ge(Dt,{key:0,dataOs:t.value,onCloseModal:o[5]||(o[5]=l=>[y.value=!1,D()])},null,8,["dataOs"])):h("",!0)],64))}}),Ho=ae(Go,[["__scopeId","data-v-4db38845"]]),S=m=>(oe("data-v-a3bfcbe1"),m=m(),se(),m),Uo={class:"options"},Wo={class:"operational__dashboard"},Yo={class:"filters"},Xo={class:"actions"},Jo={class:"search"},Ko={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 513.749 513.749",style:{"enable-background":"new 0 0 513.749 513.749"},"xml:space":"preserve",width:"512",height:"512"},Qo=S(()=>e("g",null,[e("path",{d:"M504.352,459.061l-99.435-99.477c74.402-99.427,54.115-240.344-45.312-314.746S119.261-9.277,44.859,90.15   S-9.256,330.494,90.171,404.896c79.868,59.766,189.565,59.766,269.434,0l99.477,99.477c12.501,12.501,32.769,12.501,45.269,0   c12.501-12.501,12.501-32.769,0-45.269L504.352,459.061z M225.717,385.696c-88.366,0-160-71.634-160-160s71.634-160,160-160   s160,71.634,160,160C385.623,314.022,314.044,385.602,225.717,385.696z"})],-1)),es=[Qo],ts={class:"period"},os={class:"status"},ss=S(()=>e("option",{value:"all"},"Todos Serviços",-1)),as=S(()=>e("option",{value:"activations"},"Ativações",-1)),ns=S(()=>e("option",{value:"vt"},"Visita Técnica",-1)),ls=S(()=>e("option",{value:"me"},"Mudança de endereço",-1)),cs=[ss,as,ns,ls],rs={class:"status"},ds=S(()=>e("option",{value:"all"},"Todos os periodos",-1)),is=S(()=>e("option",{value:"morning"},"Manhã",-1)),us=S(()=>e("option",{value:"afternoon"},"Tarde",-1)),_s=[ds,is,us],ps={class:"status"},vs=Ce('<option value="all" data-v-a3bfcbe1>Todos Status</option><option value="closed_productive" data-v-a3bfcbe1>Fechada produtiva</option><option value="pending_att" data-v-a3bfcbe1>Aguardando atendimento</option><option value="pending_technical" data-v-a3bfcbe1>Aguardando Responsável</option><option value="pending_schedule" data-v-a3bfcbe1>Aguardando Agendamento</option><option value="displacement" data-v-a3bfcbe1>Os em deslocamento</option><option value="closed_improductive" data-v-a3bfcbe1>Fechada improdutiva</option>',7),hs=[vs],ms={class:"clear"},gs=S(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24"},[e("path",{d:"m17,0c-3.86,0-7,3.14-7,7s3.14,7,7,7,7-3.14,7-7S20.86,0,17,0Zm0,12c-2.757,0-5-2.243-5-5s2.243-5,5-5,5,2.243,5,5-2.243,5-5,5Zm2.957-6.543l-1.543,1.543,1.543,1.543-1.414,1.414-1.543-1.543-1.543,1.543-1.414-1.414,1.543-1.543-1.543-1.543,1.414-1.414,1.543,1.543,1.543-1.543,1.414,1.414Zm-7.957,9.025c.616.412,1.289.743,2,.995v8.523l-6-4.5v-5.12L0,5.38v-2.38C0,1.346,1.346,0,3,0h8.349c-.706.571-1.325,1.244-1.831,2H3c-.551,0-1,.449-1,1v1.62l8,9v4.88l2,1.5v-5.518Z"})],-1)),fs=[gs],bs={class:"table_orders"},$s=S(()=>e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"left"}},"Protocolo"),e("th",{style:{"text-align":"left"}},"Serviço"),e("th",null,"Agendamento"),e("th",{style:{"text-align":"left"}},"Status"),e("th",{style:{"text-align":"left"}},"Técnico"),e("th",{style:{"text-align":"left"}},"Confirmação do cliente"),e("th",{style:{"text-align":"left"}},"Localidade"),e("th",null,"Ações")])],-1)),ys={style:{"text-align":"left"}},Cs=["onClick"],xs={style:{"text-align":"left"}},As={class:"flex"},Ss=["src"],ws={class:"flex"},ks=["src"],Ds={class:"flex"},Ts=["fill"],Os=S(()=>e("path",{d:"m24,24H0v-1c0-1.654,1.346-3,3-3h18c1.654,0,3,1.346,3,3v1ZM3.718,5.202L1.4,2.982.018,4.426l2.317,2.22,1.383-1.443Zm3.862-2.493L6.367-.008l-1.826.814,1.213,2.717,1.826-.814Zm16.402,1.717l-1.383-1.443-2.317,2.22,1.383,1.443,2.317-2.22Zm-4.523-3.619L17.633-.008l-1.213,2.717,1.826.814,1.213-2.717Zm1.541,12.193c0-4.963-4.037-9-9-9S3,8.037,3,13v5h18v-5Zm-9-2c-1.103,0-2,.897-2,2h-2c0-2.206,1.794-4,4-4v2Z"},null,-1)),Bs=[Os],Is={class:"flex"},Ps=["src"],Rs={style:{"text-align":"left"}},Fs={key:0,class:"flex"},Ms=["src","alt"],Ls={key:1,class:"flex"},Vs=["src","alt"],Ns={class:"flex"},qs=["src"],zs=["onClick"],Zs=S(()=>e("svg",{class:"actions_order",xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:"512",height:"512"},[e("circle",{cx:"12",cy:"2",r:"2"}),e("circle",{cx:"12",cy:"12",r:"2"}),e("circle",{cx:"12",cy:"22",r:"2"})],-1)),Es=[Zs],js=te({__name:"OperationalSchedule",setup(m){const z=be(),F=u([]),k=u([]),b=u(""),t=u("all"),$=u("all"),y=u("all"),g=new Date,Z=g.getFullYear(),D=String(g.getMonth()+1).padStart(2,"0"),T=String(g.getDate()).padStart(2,"0"),M=`${Z}-${D}-${T}`,C=u(!1),O=u(M);(()=>{z.setInfoPage({title:"Agenda Operacional Aniel",subtitle:"Acompanhe o status de agendamento em tempo real"})})();const p=u("operational"),B=()=>{N({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/dashboard-operational",method:"get",params:{period:O.value},headers:{Authorization:"Bearer "+q.get("token")}}).then(l=>{F.value=l.data.dashboard,k.value=l.data.permissions}).catch(l=>{console.log(l)})},L=$e(()=>{const l=b.value.toString().toLowerCase();return F.value.filter(n=>{const I=n.protocolo.toLowerCase().includes(l);let a=!0;t.value==="closed_productive"?a=n.status==="Fechada Produtiva":t.value==="pending_att"?a=n.status==="Aberta Aguardando Atendimento":t.value==="closed_improductive"?a=n.status==="Fechada Improdutiva":t.value==="pending_technical"?a=n.status==="Aberta Aguardando Responsável":t.value==="displacement"?a=n.status==="OS em Deslocamento":t.value==="pending_schedule"&&(a=n.status==="Aberta Aguardando Agendamento");let P=!0;$.value==="activations"?P=n.servico==="Ativação":$.value==="vt"?P=n.servico==="Visita Técnica":$.value==="me"&&(P=n.servico==="Mudança De Endereço");let R=!0;const ne=new Date(n.data_agendamento).getHours();return y.value==="morning"?R=ne<12:y.value==="afternoon"&&(R=ne>=12),I&&a&&P&&R})});B(),setInterval(()=>{B()},1e4);const f=function(l){const I=btoa(JSON.stringify({personId:l,pbxInfo:{},availableAttendance:!0}));window.open("https://erp.agetelecom.com.br/people_informations?hash="+I,"_blank")},v=()=>{b.value="",$.value="all",t.value="all",y.value="all",B()},x=u({}),s=l=>{C.value=!0,x.value=l},o=l=>{switch(l){case"Confirmado":return{src:H,alt:"confirmado",text:"Confirmado"};case"Pendente":return{src:fe,alt:"pendente",text:"Pendente"};case"Atendente":return{src:H,alt:"Atendente",text:"Atendente"};default:return{src:Q,alt:"não enviado",text:"Não enviado"}}};return(l,n)=>{const I=ye("router-link");return r(),d(V,null,[e("div",Uo,[ce(I,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel",onClick:n[0]||(n[0]=a=>p.value="capacity")},{default:re(()=>[_("Capacidade")]),_:1}),ce(I,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/operacional",onClick:n[1]||(n[1]=a=>p.value="operational")},{default:re(()=>[_("Operacional")]),_:1})]),e("div",Wo,[e("div",Yo,[e("div",Xo,[e("div",Jo,[(r(),d("svg",Ko,es)),E(e("input",{type:"number",placeholder:"Pesquisar (Protocolo)","onUpdate:modelValue":n[2]||(n[2]=a=>b.value=a)},null,512),[[de,b.value]])]),e("div",ts,[E(e("input",{type:"date",name:"period","onUpdate:modelValue":n[3]||(n[3]=a=>O.value=a),onChange:B},null,544),[[de,O.value]])]),e("div",os,[E(e("select",{name:"status",id:"status","onUpdate:modelValue":n[4]||(n[4]=a=>$.value=a)},cs,512),[[Y,$.value]])]),e("div",rs,[E(e("select",{name:"period",id:"period","onUpdate:modelValue":n[5]||(n[5]=a=>y.value=a)},_s,512),[[Y,y.value]])]),e("div",ps,[E(e("select",{name:"status",id:"status","onUpdate:modelValue":n[6]||(n[6]=a=>t.value=a)},hs,512),[[Y,t.value]])]),e("div",ms,[e("button",{onClick:n[7]||(n[7]=a=>v())},fs)])])]),e("div",bs,[e("table",null,[$s,e("tbody",null,[(r(!0),d(V,null,J(L.value,(a,P)=>(r(),d("tr",{key:P},[e("td",ys,[e("b",{onClick:R=>f(a.cliente_id),style:{"user-select":"none",cursor:"pointer"}},"# ",8,Cs),_(i(a.protocolo),1)]),e("td",xs,[e("div",As,[e("img",{src:c(ee),alt:"servico"},null,8,Ss),e("span",null,i(a.sub_servico),1)])]),e("td",null,[e("div",ws,[e("img",{src:c(K),alt:"agenda"},null,8,ks),e("span",null,i(a.data_agendamento),1)])]),e("td",null,[e("div",Ds,[(r(),d("svg",{fill:a.cor_indicativa??"#cccccc",xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},Bs,8,Ts)),e("span",null,i(a.status),1)])]),e("td",null,[e("div",Is,[e("img",{src:c(xe),alt:"agenda"},null,8,Ps),e("span",null,i(a.responsavel),1)])]),e("td",Rs,[a.status!="OS em Deslocamento"?(r(),d("div",Fs,[e("img",{src:o(a.confirmacao_cliente).src,alt:o(a.confirmacao_deslocamento).alt},null,8,Ms),e("span",null,i(o(a.confirmacao_cliente).text),1)])):(r(),d("div",Ls,[e("img",{src:o(a.confirmacao_deslocamento).src,alt:o(a.confirmacao_deslocamento).alt},null,8,Vs),e("span",null,i(o(a.confirmacao_deslocamento).text),1)]))]),e("td",null,[e("div",Ns,[e("img",{src:c(Ae),alt:"local"},null,8,qs),e("span",null,i(a.localidade),1)])]),e("td",null,[e("div",{style:{cursor:"pointer"},onClick:R=>s(a)},Es,8,zs)])]))),128))])])])]),C.value==!0?(r(),ge(Ho,{key:0,osInfo:x.value,permissions:k.value,onCloseModal:n[8]||(n[8]=a=>C.value=!1)},null,8,["osInfo","permissions"])):h("",!0)],64)}}}),Us=ae(js,[["__scopeId","data-v-a3bfcbe1"]]);export{Us as default};
