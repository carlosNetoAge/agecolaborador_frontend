import{d as q,k as U,a as i,O as x,l as c,q as t,y as B,z as L,J as m,E as l,u as k,W as O,v as H,F as P,x as J,S as r,A as $,L as _,C as I,D as M,K,o as u,M as Q,G as W,H as Y,N as X,_ as tt}from"./index-DnNYaEyR.js";const et="/assets/order_warning-CQvWwiF1.png",st="/assets/order_approval-bze_dPfJ.png",ot="/assets/order_surplus-BGa76hjP.png",lt="/assets/order_all-C1TV9-7P.png",nt="/assets/order_rescheduled-BmTKGCY8.png",o=b=>(W("data-v-b2097063"),b=b(),Y(),b),at={class:"dashboard__page"},dt={class:"options"},it={class:"navbar"},ct={class:"cards"},rt={class:"card"},ut=o(()=>t("div",{class:"info"},[t("div",{class:"title"},[t("p",null,"Ordens do dia")]),t("div",{class:"value"},[t("span",null," - "),t("span")])],-1)),vt={class:"icon"},_t=["src"],pt={class:"card"},ht={class:"info"},gt=o(()=>t("div",{class:"title"},[t("p",null,"Ordens excedentes")],-1)),mt={class:"value"},bt=o(()=>t("span",null,null,-1)),ft={class:"icon"},yt=["src"],wt={class:"card"},St={class:"info"},Ct=o(()=>t("div",{class:"title"},[t("p",null,"Ordens aprovadas")],-1)),xt={class:"value"},kt=o(()=>t("span",null,null,-1)),$t={class:"icon"},Tt=["src"],At={class:"card"},Dt={class:"info"},Bt=o(()=>t("div",{class:"title"},[t("p",null,"Ordens reagendadas")],-1)),Lt={class:"value"},Ot=o(()=>t("span",null,null,-1)),Pt={class:"icon"},It=["src"],Mt={class:"card"},Vt={class:"info"},zt=o(()=>t("div",{class:"title"},[t("p",null,"Ordens pendentes")],-1)),Ft={class:"value"},Zt=o(()=>t("span",null,null,-1)),Nt={class:"icon"},Et=["src"],Gt={class:"actions"},Rt={class:"search"},jt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 513.749 513.749",style:{"enable-background":"new 0 0 513.749 513.749"},"xml:space":"preserve",width:"512",height:"512"},qt=o(()=>t("g",null,[t("path",{d:"M504.352,459.061l-99.435-99.477c74.402-99.427,54.115-240.344-45.312-314.746S119.261-9.277,44.859,90.15   S-9.256,330.494,90.171,404.896c79.868,59.766,189.565,59.766,269.434,0l99.477,99.477c12.501,12.501,32.769,12.501,45.269,0   c12.501-12.501,12.501-32.769,0-45.269L504.352,459.061z M225.717,385.696c-88.366,0-160-71.634-160-160s71.634-160,160-160   s160,71.634,160,160C385.623,314.022,314.044,385.602,225.717,385.696z"})],-1)),Ut=[qt],Ht={class:"period"},Jt={class:"status"},Kt=X('<option value="all" data-v-b2097063>Todos</option><option value="surplus" data-v-b2097063>Excedentes</option><option value="approved" data-v-b2097063>Aprovado</option><option value="rescheduled" data-v-b2097063>Reagendas</option><option value="pending" data-v-b2097063>Pendentes</option>',5),Qt=[Kt],Wt=o(()=>t("div",{class:"clear"},[t("button",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24"},[t("path",{d:"m17,0c-3.86,0-7,3.14-7,7s3.14,7,7,7,7-3.14,7-7S20.86,0,17,0Zm0,12c-2.757,0-5-2.243-5-5s2.243-5,5-5,5,2.243,5,5-2.243,5-5,5Zm2.957-6.543l-1.543,1.543,1.543,1.543-1.414,1.414-1.543-1.543-1.543,1.543-1.414-1.414,1.543-1.543-1.543-1.543,1.414-1.414,1.543,1.543,1.543-1.543,1.414,1.414Zm-7.957,9.025c.616.412,1.289.743,2,.995v8.523l-6-4.5v-5.12L0,5.38v-2.38C0,1.346,1.346,0,3,0h8.349c-.706.571-1.325,1.244-1.831,2H3c-.551,0-1,.449-1,1v1.62l8,9v4.88l2,1.5v-5.518Z"})])])],-1)),Yt={class:"table_orders"},Xt=o(()=>t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"left"}},"Protocolo"),t("th",null,"Tipo"),t("th",{style:{"text-align":"left"}},"Serviço"),t("th",null,"Agendamento"),t("th",null,"Período"),t("th",{style:{"text-align":"left"}},"Status"),t("th",null,"Localidade"),t("th",null,"Aberta por"),t("th",null,"Setor"),t("th",null,"Solicitante"),t("th",null,"Aprovado por"),t("th",null,"Ações")])],-1)),te={style:{"text-align":"left"}},ee={style:{"text-align":"left"}},se={class:"status"},oe=o(()=>t("td",null,null,-1)),le=["onClick"],ne=o(()=>t("svg",{class:"actions_order",xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:"512",height:"512"},[t("circle",{cx:"12",cy:"2",r:"2"}),t("circle",{cx:"12",cy:"12",r:"2"}),t("circle",{cx:"12",cy:"22",r:"2"})],-1)),ae=[ne],de={key:0,class:"modal"},ie={class:"card"},ce={class:"close__btn"},re=o(()=>t("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),ue=[re],ve=o(()=>t("h1",null,"Gerenciamento da Ordem de Serviço",-1)),_e={class:"info"},pe=o(()=>t("b",null,"Protocolo:",-1)),he=o(()=>t("b",null,"Servico:",-1)),ge=o(()=>t("b",null,"Tipo de serviço:",-1)),me=o(()=>t("b",null,"Agendamento:",-1)),be=o(()=>t("b",null,"Periodo:",-1)),fe=o(()=>t("b",null,"Status:",-1)),ye=o(()=>t("b",null,"Localidade:",-1)),we={class:"options"},Se={key:1,class:"reschedule_modal"},Ce={class:"card"},xe={class:"close__btn"},ke=o(()=>t("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),$e=[ke],Te=o(()=>t("h1",null,"Reagendar Ordem de Serviço",-1)),Ae={class:"info"},De={class:"days"},Be={class:"day"},Le=o(()=>t("div",{class:"infoDay"},[t("p",null,"Quinta-feira, 01 de agosto de 2024")],-1)),Oe={class:"period"},Pe={class:"day"},Ie=o(()=>t("div",{class:"infoDay"},[t("p",null,"Sexta-feira, 02 de agosto de 2024")],-1)),Me={class:"period"},Ve={class:"day"},ze=o(()=>t("div",{class:"infoDay"},[t("p",null,"Sábado, 03 de agosto de 2024")],-1)),Fe={class:"period"},Ze={class:"day"},Ne=o(()=>t("div",{class:"infoDay"},[t("p",null,"Segunda-feira, 05 de agosto de 2024")],-1)),Ee={class:"period"},Ge=q({__name:"DashboardScheduleCapacity",setup(b){const V=U(),T=i({}),z=()=>{V.setInfoPage({title:"Agenda Técnica Aniel",subtitle:"Aprove o excedente de ordens de serviço que não entraram no sistema por limitação do capacity."})};i("all");const p=i([]),y=new Date,F=y.getFullYear(),Z=String(y.getMonth()+1).padStart(2,"0"),N=String(y.getDate()).padStart(2,"0"),E=`${F}-${Z}-${N}`,w=i(E),S=i(""),h=i("all"),d=i([]),g=i(!1),C=i(!1),n=i(""),f=()=>{I({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/dashboard",method:"GET",params:{period:w.value},headers:{"Content-Type":"application/json",Authorization:"Bearer "+M.get("token")}}).then(a=>{p.value=a.data}).catch(a=>{console.log(a)})},G=a=>{I({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/approval-order",method:"POST",data:{order:a},headers:{"Content-Type":"application/json",Authorization:"Bearer "+M.get("token")}}).then(e=>{console.log(e),f(),g.value=!1,d.value=[]}).catch(e=>{console.log(e)})},A=x(()=>p.value.reduce((a,e)=>{const v=e.status_order.filter(s=>s.id===15).length;return a+v},0)),D=x(()=>p.value.reduce((a,e)=>{const v=e.status_order.filter(s=>s.id===16).length;return a+v},0)),R=x(()=>{const a=S.value.toString().toLowerCase();return p.value.filter(e=>{const v=e.protocolo.toLowerCase().includes(a);let s=!0;return h.value==="approved"?s=e.status_order[0].id===15:h.value==="rescheduled"?s=e.status_order[0].id===16:h.value==="pending"&&(s=e.status_order[0].id!==15&&e.status_order[0].id!==16),v&&s})});return f(),z(),setInterval(()=>{f()},1e4),(a,e)=>{const v=K("router-link");return u(),c(P,null,[t("div",at,[t("div",dt,[t("div",it,[B(v,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel",onClick:e[0]||(e[0]=s=>T.value="operational")},{default:L(()=>[r("Operacional")]),_:1}),B(v,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/dashboard",onClick:e[1]||(e[1]=s=>T.value="dashboard")},{default:L(()=>[r("Dashboard")]),_:1})])]),t("div",ct,[t("div",rt,[ut,t("div",vt,[t("img",{src:m(lt),alt:""},null,8,_t)])]),t("div",pt,[t("div",ht,[gt,t("div",mt,[t("span",null,l(p.value.length),1),bt])]),t("div",ft,[t("img",{src:m(ot),alt:""},null,8,yt)])]),t("div",wt,[t("div",St,[Ct,t("div",xt,[t("span",null,l(A.value),1),kt])]),t("div",$t,[t("img",{src:m(st),alt:""},null,8,Tt)])]),t("div",At,[t("div",Dt,[Bt,t("div",Lt,[t("span",null,l(D.value),1),Ot])]),t("div",Pt,[t("img",{src:m(nt),alt:""},null,8,It)])]),t("div",Mt,[t("div",Vt,[zt,t("div",Ft,[t("span",null,l(p.value.length-A.value-D.value),1),Zt])]),t("div",Nt,[t("img",{src:m(et),alt:""},null,8,Et)])])]),t("div",Gt,[t("div",Rt,[(u(),c("svg",jt,Ut)),k(t("input",{type:"number",placeholder:"Pesquisar (Protocolo)","onUpdate:modelValue":e[2]||(e[2]=s=>S.value=s)},null,512),[[O,S.value]])]),t("div",Ht,[k(t("input",{type:"date",name:"period","onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),onChange:f},null,544),[[O,w.value]])]),t("div",Jt,[k(t("select",{name:"status",id:"status","onUpdate:modelValue":e[4]||(e[4]=s=>h.value=s)},Qt,512),[[H,h.value]])]),Wt]),t("div",Yt,[t("table",null,[Xt,t("tbody",null,[(u(!0),c(P,null,J(R.value,(s,j)=>(u(),c("tr",{key:j},[t("td",te,"# "+l(s.protocolo),1),t("td",null,l(s.servico),1),t("td",ee,l(s.subservico),1),t("td",null,l(s.hora_agendamento),1),t("td",null,l(s.periodo),1),t("td",null,[t("div",se,[t("div",{class:"badge",style:Q({backgroundColor:s.status_order[0].cor_indicativa})},null,4),t("span",null,l(s.status_order[0].titulo),1)])]),t("td",null,l(s.localidade),1),t("td",null,l(s.aberta_por),1),t("td",null,l(s.setor),1),oe,t("td",null,l(s.aprovador),1),t("td",null,[s.status_order[0].id!=15?(u(),c("div",{key:0,style:{cursor:"pointer"},onClick:Re=>[d.value=s,g.value=!0]},ae,8,le)):$("",!0)])]))),128))])])])]),g.value?(u(),c("div",de,[t("div",ie,[t("div",ce,[(u(),c("svg",{onClick:e[5]||(e[5]=s=>g.value=!1),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},ue))]),ve,t("div",_e,[t("p",null,[pe,r(" #"+l(d.value.protocolo),1)]),t("p",null,[he,r(" "+l(d.value.servico),1)]),t("p",null,[ge,r(" "+l(d.value.subservico),1)]),t("p",null,[me,r(" "+l(d.value.hora_agendamento),1)]),t("p",null,[be,r(" "+l(d.value.periodo),1)]),t("p",null,[fe,r(" "+l(d.value.status_order[0].titulo),1)]),t("p",null,[ye,r(" "+l(d.value.localidade),1)])]),t("div",we,[t("button",{onClick:e[6]||(e[6]=s=>G(d.value.protocolo)),style:{"background-color":"#11B15B"}},"Aprovar entrada"),t("button",{onClick:e[7]||(e[7]=s=>C.value=!0),style:{"background-color":"#5E78FF"}},"Reagendar OS")])])])):$("",!0),g.value&&C.value?(u(),c("div",Se,[t("div",Ce,[t("div",xe,[(u(),c("svg",{onClick:e[8]||(e[8]=s=>C.value=!1),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},$e))]),Te,t("div",Ae,[t("div",De,[t("div",Be,[Le,t("div",Oe,[t("button",{onClick:e[9]||(e[9]=s=>n.value="morning"),class:_({selected:n.value=="morning"})},"Manhã",2),t("button",{onClick:e[10]||(e[10]=s=>n.value="afternoon"),class:_({selected:n.value=="afternoon"})},"Tarde",2)])]),t("div",Pe,[Ie,t("div",Me,[t("button",{onClick:e[11]||(e[11]=s=>n.value="morning2"),class:_({selected:n.value=="morning2"})},"Manhã",2),t("button",{onClick:e[12]||(e[12]=s=>n.value="afternoon2"),class:_({selected:n.value=="afternoon2"})},"Tarde",2)])]),t("div",Ve,[ze,t("div",Fe,[t("button",{onClick:e[13]||(e[13]=s=>n.value="morning3"),class:_({selected:n.value=="morning3"})},"Manhã",2),t("button",{onClick:e[14]||(e[14]=s=>n.value="afternoon3"),class:_({selected:n.value=="afternoon3"})},"Tarde",2)])]),t("div",Ze,[Ne,t("div",Ee,[t("button",{onClick:e[15]||(e[15]=s=>n.value="morning4"),class:_({selected:n.value=="morning4"})},"Manhã",2),t("button",{onClick:e[16]||(e[16]=s=>n.value="afternoon4"),class:_({selected:n.value=="afternoon4"})},"Tarde",2)])])])])])])):$("",!0)],64)}}}),qe=tt(Ge,[["__scopeId","data-v-b2097063"]]);export{qe as default};
