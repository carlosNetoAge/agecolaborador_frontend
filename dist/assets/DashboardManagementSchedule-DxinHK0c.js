import{d as F,a as v,o as c,l as d,q as t,F as m,x as k,J as n,E as a,u as B,U as I,S as i,L as E,A as q,C as S,D as w,G as H,H as K,_ as N,k as R,y as M,z as T,P as Y,V as Z,K as Q}from"./index-CUIfp4bZ.js";import{m as $,a as U}from"./afternoon-D3aPXxoM.js";import{s as J}from"./schedule-CHL6DSty.js";const W="/assets/deadline-Bao4OFcx.png",V="/assets/team-CaB8K89L.png",tt="/assets/description-CXZGHKMm.png",et="/assets/unlock-Cjv9w65z.png",st="/assets/lock-BDpS9MGs.png",D="/assets/unsafe-B9ScVL9a.png",P="/assets/capacity-CfsXMRHo.png",L="/assets/safe-deYX1TQc.png",at="/assets/cogwheel-DMTXTN52.png",ot="/assets/sla-DFzrdN2_.png",lt="/assets/technician-idYbD2z1.png",nt="/assets/calculator-DvS-yx5U.png",s=f=>(H("data-v-86b19557"),f=f(),K(),f),ct={class:"content__capacity"},dt={class:"days"},it={class:"action_alter_capacity"},ut=["onClick"],_t=["src"],rt=["src"],ht=["src"],pt={class:"services-container"},vt={class:"services"},gt={key:0},mt=s(()=>t("th",{style:{width:"5%","text-align":"center"}},"Período",-1)),ft=s(()=>t("th",null,"Serviço",-1)),bt=s(()=>t("th",null,"Capacidade",-1)),yt=s(()=>t("th",null,"Agendados",-1)),xt=s(()=>t("th",null,"Líquido",-1)),Ct=s(()=>t("th",null,"Status",-1)),kt=s(()=>t("th",null,"Motivo fechamento",-1)),St=s(()=>t("th",null,"Data e hora do fechamento",-1)),wt=s(()=>t("th",null,"Alterado por",-1)),Dt=s(()=>t("th",null,"ações",-1)),zt=[mt,ft,bt,yt,xt,Ct,kt,St,wt,Dt],At={key:1},Bt=s(()=>t("th",{style:{width:"5%","text-align":"center"}},"Período",-1)),It=s(()=>t("th",null,"Serviço",-1)),Mt=s(()=>t("th",null,"Capacidade atual",-1)),Tt=s(()=>t("th",null,"Líquido",-1)),$t=s(()=>t("th",null,"Técnicos",-1)),Ut=s(()=>t("th",null,"Quantidade de serviços",-1)),Vt=s(()=>t("th",null,"Capacidade calculada",-1)),Pt=s(()=>t("th",null,"Alterado por",-1)),Lt=[Bt,It,Mt,Tt,$t,Ut,Vt,Pt],Ft={style:{width:"5%"}},Nt=["src"],Ot={style:{"text-align":"left"}},Gt={class:"flex"},Xt=["src"],jt={class:"flex"},Et=["src"],qt={class:"flex"},Ht=["src"],Kt={class:"flex"},Rt=["src"],Yt={class:"flex"},Zt=["src"],Qt={class:"flex"},Jt=["src"],Wt={class:"flex"},te=["src"],ee={class:"actions_table"},se=["onClick"],ae=s(()=>t("circle",{cx:"12",cy:"2",r:"2"},null,-1)),oe=s(()=>t("circle",{cx:"12",cy:"12",r:"2"},null,-1)),le=s(()=>t("circle",{cx:"12",cy:"22",r:"2"},null,-1)),ne=[ae,oe,le],ce={style:{width:"5%"}},de=["src"],ie={style:{"text-align":"left"}},ue={class:"flex"},_e=["src"],re={class:"flex"},he=["src"],pe={class:"flex"},ve=["src"],ge=["onUpdate:modelValue"],me={class:"flex"},fe=["src"],be=["onUpdate:modelValue"],ye={class:"flex"},xe=["src"],Ce={class:"flex"},ke=["src"],Se={key:0,class:"modal"},we={class:"card"},De={class:"close__btn"},ze=s(()=>t("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),Ae=[ze],Be=s(()=>t("h3",null,"Alterar status da agenda",-1)),Ie={class:"info"},Me=s(()=>t("b",null,"Data:",-1)),Te=s(()=>t("b",null,"Servico:",-1)),$e=s(()=>t("b",null,"Capacidade:",-1)),Ue=s(()=>t("b",null,"Utilizado:",-1)),Ve=s(()=>t("b",null,"Disponível:",-1)),Pe=s(()=>t("b",null,"Status:",-1)),Le=s(()=>t("b",null,"Motivo do fechamento:",-1)),Fe=s(()=>t("b",null,"Data e hora:",-1)),Ne=s(()=>t("b",null,"Alterado por:",-1)),Oe={class:"action"},Ge=F({__name:"StatusCapacityManagement",setup(f){const g=v(!1),b=v([]),l=v({});v(!1);const h=v([]),p=v(-1),y=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],O=o=>{const u=new Date(o),_=u.getUTCDate(),r=y[u.getUTCMonth()],e=u.getUTCFullYear();return`${_} de ${r} de ${e}`},C=()=>{S({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/schedule",method:"GET",headers:{Authorization:"Bearer "+w.get("token")}}).then(o=>{b.value=o.data}).catch(o=>{console.log(o)})};C();const z=o=>o.capacidade-o.utilizado<0||o.capacidade-o.utilizado<5?D:L,G=()=>{S({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/schedule/alter-status",method:"POST",headers:{Authorization:"Bearer "+w.get("token")},data:{schedule_id:l.value.id,command:l.value.status=="aberta"?"close":"reopen",motive_id:1}}).then(()=>{C(),g.value=!1}).catch(o=>{console.log(o)})},X=()=>{h.value.forEach(o=>{o.tecnicos===void 0&&(o.tecnicos=o.capacidade/2),o.sla===void 0&&(o.sla=2),o.nova_capacidade===void 0&&(o.nova_capacidade=o.capacidade)})},j=()=>{S({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/schedule/alter-capacity",method:"POST",headers:{Authorization:"Bearer "+w.get("token")},data:{schedule:h.value}}).then(o=>{C(),p.value=-1,h.value=[]}).catch(o=>{})};return(o,u)=>(c(),d(m,null,[t("div",ct,[t("div",dt,[(c(!0),d(m,null,k(b.value,(_,r)=>(c(),d("div",{class:"day",key:r},[t("div",it,[p.value!=r?(c(),d("button",{key:0,onClick:e=>[h.value=_,p.value=r,X()]},[t("img",{src:n(at),alt:""},null,8,_t)],8,ut)):(c(),d(m,{key:1},[t("button",{onClick:u[0]||(u[0]=e=>[p.value=-1,h.value=[]])},[t("img",{src:n(D),alt:""},null,8,rt)]),t("button",{onClick:j},[t("img",{src:n(L),alt:""},null,8,ht)])],64))]),t("h4",null,a(_[0].dia_semana.charAt(0).toUpperCase()+_[0].dia_semana.slice(1))+", "+a(O(r)),1),t("div",pt,[t("div",vt,[t("table",null,[t("thead",null,[p.value!=r?(c(),d("tr",gt,zt)):(c(),d("tr",At,Lt))]),t("tbody",null,[p.value!=r?(c(!0),d(m,{key:0},k(_,(e,A)=>(c(),d("tr",{key:A},[t("td",Ft,[t("img",{src:e.periodo=="manha"?n($):n(U),alt:""},null,8,Nt)]),t("td",Ot,a(e.servico),1),t("td",null,[t("div",Gt,[t("img",{src:n(P),alt:""},null,8,Xt),t("span",null,a(e.capacidade),1)])]),t("td",null,[t("div",jt,[t("img",{src:n(J),alt:""},null,8,Et),t("span",null,a(e.utilizado),1)])]),t("td",null,[t("div",qt,[t("img",{src:z(e),alt:""},null,8,Ht),t("span",null,a(e.capacidade-e.utilizado),1)])]),t("td",null,[t("div",Kt,[t("img",{style:{width:"1vw"},src:e.status=="aberta"?n(et):n(st),alt:""},null,8,Rt),t("span",null,a(e.status),1)])]),t("td",null,[t("div",Yt,[t("img",{src:n(tt),alt:""},null,8,Zt),t("span",null,a(e.motivo_fechamento!=null?e.motivo_fechamento:"-"),1)])]),t("td",null,[t("div",Qt,[t("img",{src:n(W),alt:""},null,8,Jt),t("span",null,a(e.data_fechamento!=null?e.data_fechamento+" ás "+e.hora_fechamento:"-"),1)])]),t("td",null,[t("div",Wt,[t("img",{src:n(V),alt:""},null,8,te),t("span",null,a(e.user.nome),1)])]),t("td",ee,[(c(),d("svg",{onClick:x=>[g.value=!0,l.value=e],xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:"512",height:"512"},ne,8,se))])]))),128)):(c(!0),d(m,{key:1},k(h.value,(e,A)=>(c(),d("tr",{key:e.id},[t("td",ce,[t("img",{src:e.periodo=="manha"?n($):n(U),alt:""},null,8,de)]),t("td",ie,a(e.servico),1),t("td",null,[t("div",ue,[t("img",{src:n(P),alt:""},null,8,_e),t("span",null,a(e.capacidade),1)])]),t("td",null,[t("div",re,[t("img",{src:z(e),alt:""},null,8,he),t("span",null,a(e.capacidade-e.utilizado),1)])]),t("td",null,[t("div",pe,[t("img",{src:n(lt),alt:""},null,8,ve),B(t("input",{type:"number","onUpdate:modelValue":x=>e.tecnicos=x},null,8,ge),[[I,e.tecnicos]])])]),t("td",null,[t("div",me,[t("img",{src:n(ot),alt:""},null,8,fe),B(t("input",{type:"number","onUpdate:modelValue":x=>e.sla=x},null,8,be),[[I,e.sla]])])]),t("td",null,[t("div",ye,[t("img",{src:n(nt),alt:""},null,8,xe),t("span",null,a(e.nova_capacidade=e.tecnicos*e.sla),1)])]),t("td",null,[t("div",Ce,[t("img",{src:n(V),alt:""},null,8,ke),t("span",null,a(e.user.nome),1)])])]))),128))])])])])]))),128))])]),g.value?(c(),d("div",Se,[t("div",we,[t("div",De,[(c(),d("svg",{onClick:u[1]||(u[1]=_=>g.value=!1),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},Ae))]),Be,t("div",Ie,[t("p",null,[Me,i(" #"+a(l.value.data),1)]),t("p",null,[Te,i(" "+a(l.value.servico),1)]),t("p",null,[$e,i(" "+a(l.value.capacidade),1)]),t("p",null,[Ue,i(" "+a(l.value.utilizado),1)]),t("p",null,[Ve,i(" "+a(l.value.capacidade-l.value.utilizado),1)]),t("p",null,[Pe,i(" "+a(l.value.status),1)]),t("p",null,[Le,i(" "+a(l.value.motivo_fechamento!=null?l.value.motivo_fechamento:"-"),1)]),t("p",null,[Fe,i(" "+a(l.value.data_fechamento!=null?l.value.data_fechamento+" ás "+l.value.hora_fechamento:"-"),1)]),t("p",null,[Ne,i(" "+a(l.value.user.nome),1)])]),t("div",Oe,[t("button",{onClick:u[2]||(u[2]=_=>G()),class:E(l.value.status=="aberta"?"closed":"open")},a(l.value.status=="aberta"?"Fechar agenda":"Reabrir agenda"),3)])])])):q("",!0)],64))}}),Xe=N(Ge,[["__scopeId","data-v-86b19557"]]),je={class:"options"},Ee={class:"content__dashboard"},qe={class:"page__actual"},He=F({__name:"DashboardManagementSchedule",setup(f){const g=R(),b=v(Xe);return(()=>{g.setInfoPage({title:"Agenda Operacional Aniel",subtitle:"Acompanhe o status de agendamento em tempo real"})})(),(h,p)=>{const y=Q("router-link");return c(),d(m,null,[t("div",je,[M(y,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/dashboard"},{default:T(()=>[i("Dashboard")]),_:1}),M(y,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/gerenciamento"},{default:T(()=>[i("Gerenciamento")]),_:1})]),t("div",Ee,[t("div",qe,[(c(),Y(Z(b.value)))])])],64)}}}),Ze=N(He,[["__scopeId","data-v-15aa1fc4"]]);export{Ze as default};
