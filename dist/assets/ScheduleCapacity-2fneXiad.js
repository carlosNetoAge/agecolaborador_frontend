import{d as N,a as i,p as T,R as V,l as n,q as e,F as k,x,A as X,C as B,D as w,o as c,L as S,E as t,N as U,_ as R,k as q,y as I,z as G,J as M,K as H,S as C,G as J,H as K}from"./index-CKB84DZM.js";const j="/assets/morning-CSKRONwJ.png",Y="/assets/afternoon-CHR2RdtE.png",Q={class:"calendar"},W={class:"months"},Z=["onClick"],aa=["onClick"],ea={class:"dayName"},ta={class:"dayNumber"},sa={key:0,class:"dots-container"},oa=U('<div class="dot" data-v-e79afc52></div><div class="dot" data-v-e79afc52></div><div class="dot" data-v-e79afc52></div><div class="dot" data-v-e79afc52></div><div class="dot" data-v-e79afc52></div>',5),na=[oa],ca=N({__name:"CalendarOperational",props:{statusCalendar:Boolean},emits:["updateData"],setup(_,{emit:$}){const E=_,v=i({}),p=$,m=new Date,h=i(b(m)),y=i(m.getDate()),f=s=>{if(!s){s=new Date;const u=s.getFullYear(),o=String(s.getMonth()+1).padStart(2,"0"),d=String(s.getDate()).padStart(2,"0"),z=`${u}-${o}-${d}`;return p("updateData",z)}return p("updateData",s)},r=async()=>{B({method:"get",url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/capacity/calendar",headers:{"Content-Type":"application/json",Authorization:"Bearer "+w.get("token")}}).then(s=>{v.value=s.data,f(),P()})};function b(s){const u={month:"long"},o=s.toLocaleString("pt-BR",u);return o.charAt(0).toUpperCase()+o.slice(1)}const a=i(!1),g=i(0),L=i(0),l=i(null),O=s=>{var u,o;a.value=!0,g.value=s.pageX-(((u=l.value)==null?void 0:u.offsetLeft)||0),L.value=((o=l.value)==null?void 0:o.scrollLeft)||0},A=s=>{var d;if(!a.value)return;s.preventDefault();const o=(s.pageX-(((d=l.value)==null?void 0:d.offsetLeft)||0)-g.value)*2;l.value&&(l.value.scrollLeft=L.value-o)},D=()=>{a.value=!1},P=()=>{l.value&&(l.value.addEventListener("mousemove",A),l.value.addEventListener("mouseup",D),l.value.addEventListener("mouseleave",D))};return T(()=>{r()}),V(()=>{l.value&&(l.value.removeEventListener("mousemove",A),l.value.removeEventListener("mouseup",D),l.value.removeEventListener("mouseleave",D))}),(s,u)=>(c(),n("div",Q,[e("div",W,[(c(!0),n(k,null,x(v.value,(o,d)=>(c(),n("div",{key:d,class:S({month:!0,select:d===h.value}),onClick:z=>[h.value=d,y.value=0]},t(d),11,Z))),128))]),e("div",{ref_key:"container",ref:l,class:"days",onMousedown:O},[(c(!0),n(k,null,x(v.value[h.value],(o,d)=>(c(),n("div",{class:"day",key:d},[e("div",{class:S(["box",{selectedDay:y.value===o.day}]),onClick:z=>[y.value=o.day,f(o.extense)]},[e("span",ea,t(o.name),1),e("span",ta,t(o.day),1)],10,aa)]))),128))],544),E.statusCalendar?X("",!0):(c(),n("section",sa,na))]))}}),la=R(ca,[["__scopeId","data-v-e79afc52"]]),F=_=>(J("data-v-da617f2d"),_=_(),K(),_),da={class:"options"},ia={class:"container_content"},ra={class:"capacity"},ua={class:"period"},va={class:"header"},_a=F(()=>e("div",{class:"title"}," Capacidade período Manhã ",-1)),pa=["src"],ha={class:"services"},fa={class:"title"},ga={class:"progress"},ma=["value","max"],ya={class:"info"},Ca={key:0},ka={key:1},Da={class:"period"},xa={class:"header"},Sa=F(()=>e("div",{class:"title"}," Capacidade período Tarde ",-1)),$a=["src"],ba={class:"services"},za={class:"title"},Ea={class:"progress"},La=["value","max"],Aa={class:"info"},Ia={key:0},Ma={key:1},Na=N({__name:"ScheduleCapacity",setup(_){const $=q();(()=>{$.setInfoPage({title:"Agenda Técnica Aniel",subtitle:"Acompanhe a capacidade de agendamento em tempo real"})})();const v=i(!1),p=i({}),m=i(),h=f=>{v.value=!1,m.value=f,B({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/capacity",params:{period:f},method:"GET",headers:{Authorization:"Bearer "+w.get("token")}}).then(r=>{v.value=!0,p.value=r.data}).catch(r=>{console.log(r)})},y=i("operational");return setInterval(()=>{h(m.value)},1e4),(f,r)=>{const b=H("router-link");return c(),n(k,null,[e("div",da,[I(b,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel",onClick:r[0]||(r[0]=a=>y.value="operational")},{default:G(()=>[C("Operacional")]),_:1})]),I(la,{onUpdateData:h,statusCalendar:v.value},null,8,["statusCalendar"]),e("div",ia,[e("div",ra,[e("div",ua,[e("div",va,[_a,e("img",{src:M(j),alt:""},null,8,pa)]),e("div",ha,[(c(!0),n(k,null,x(p.value.manha||[],(a,g)=>(c(),n("div",{class:"service",key:g},[e("div",fa,[e("h3",null,t(a.servico)+" "+t(a.status=="fechada"?"- Fechada às "+a.hora_fechamento:""),1),e("p",null,t(a.motivo_fechamento),1)]),e("div",ga,[e("progress",{class:S({closed:a.status=="fechada"}),value:a.utilizado,max:a.capacidade},null,10,ma),e("div",ya,[a.status=="aberta"?(c(),n("span",Ca,[e("b",null,t(Math.abs(a.capacidade-a.utilizado)),1),C(" - "+t(a.capacidade-a.utilizado>=0?"Disponíveis":"Excedentes"),1)])):(c(),n("span",ka,[e("b",null,t(a.capacidade-a.utilizado>=0?0:Math.abs(a.capacidade-a.utilizado)),1),C(" - "+t(a.capacidade-a.utilizado>=0?"Disponíveis":"Excedentes"),1)]))])])]))),128))])]),e("div",Da,[e("div",xa,[Sa,e("img",{src:M(Y),alt:""},null,8,$a)]),e("div",ba,[(c(!0),n(k,null,x(p.value.tarde||[],(a,g)=>(c(),n("div",{class:"service",key:g},[e("div",za,[e("h3",null,t(a.servico)+" "+t(a.status=="fechada"?"- Fechada às "+a.hora_fechamento:""),1),e("p",null,t(a.motivo_fechamento),1)]),e("div",Ea,[e("progress",{class:S({closed:a.status=="fechada"}),value:a.utilizado,max:a.capacidade},null,10,La),e("div",Aa,[a.status=="aberta"?(c(),n("span",Ia,[e("b",null,t(Math.abs(a.capacidade-a.utilizado)),1),C(" - "+t(a.capacidade-a.utilizado>=0?"Disponíveis":"Excedentes"),1)])):(c(),n("span",Ma,[e("b",null,t(Math.abs(a.capacidade-a.utilizado)),1),C(" - "+t(a.capacidade-a.utilizado>=0?"Disponíveis":"Excedentes"),1)]))])])]))),128))])])])])],64)}}}),wa=R(Na,[["__scopeId","data-v-da617f2d"]]);export{wa as default};
