import{d as Z,a as v,p as H,l as r,q as e,F as V,x as j,A as P,E as a,C as L,D as M,o as n,L as J,G as F,H as E,_ as U,S as b,P as K,k as W,O as R,y as I,z as G,J as T,u as z,W as N,v as Q,K as X,M as ee,N as te}from"./index-Cq6NOuik.js";const se="/assets/order_warning-CQvWwiF1.png",oe="/assets/order_approval-bze_dPfJ.png",ae="/assets/order_surplus-BGa76hjP.png",le="/assets/order_all-C1TV9-7P.png",ne="/assets/order_rescheduled-BmTKGCY8.png",q=s=>(F("data-v-fca4bad3"),s=s(),E(),s),de={class:"reschedule_modal"},ce={class:"card"},re={class:"close__btn"},ie=q(()=>e("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),ue=[ie],ve=q(()=>e("h1",null,"Reagendar Ordem de Serviço",-1)),_e={key:0,class:"days"},he={class:"day"},pe={class:"infoDay"},ge={class:"period"},me=["onClick","disabled"],Se={class:"reschedule-button"},be=Z({__name:"RescheduleOrder",props:["osSelected"],emits:["closeModal","closeAll"],setup(s,{emit:A}){const{osSelected:f}=s;v(!1);const $=v(""),i=v([]),p=v(!0),C=A,x=()=>{C("closeModal")},k=()=>{C("closeAll")},d=()=>{p.value=!0,L({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/capacity/reschedule",method:"get",params:{typeService:f.servico},headers:{"Content-Type":"application/json",Authorization:"Bearer "+M.get("token")}}).then(l=>{i.value=l.data,p.value=!1}).catch(l=>{console.log(l)})},g=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],O=l=>{const u=new Date(l),m=u.getUTCDate(),w=g[u.getUTCMonth()],c=u.getUTCFullYear();return`${m} de ${w} de ${c}`},h=v({date:"",period:"",order:""}),D=(l,u)=>{h.value={date:l,period:u,order:f.protocolo},$.value=`${l} ${u}`},B=()=>{L({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/reschedule-order",method:"post",data:{order:h.value.order,period:h.value.period,date:h.value.date},headers:{"Content-Type":"application/json",Authorization:"Bearer "+M.get("token")}}).then(l=>{k()}).catch(l=>{console.log(l)})};return H(()=>{d()}),(l,u)=>(n(),r("div",de,[e("div",ce,[e("div",re,[(n(),r("svg",{onClick:u[0]||(u[0]=m=>x()),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},ue))]),ve,p.value?P("",!0):(n(),r("div",_e,[(n(!0),r(V,null,j(i.value,(m,w)=>(n(),r("div",he,[e("div",pe,[e("p",null,a(m.dayName)+", "+a(O(w)),1)]),e("div",ge,[(n(!0),r(V,null,j(m.period||[],(c,o)=>(n(),r("button",{onClick:S=>D(w,o),class:J({selected:$.value==w+" "+o,disable:c.status!="aberta"}),disabled:c.status!="aberta"},a(o),11,me))),256))])]))),256))])),e("div",Se,[$.value!=""?(n(),r("button",{key:0,onClick:u[1]||(u[1]=m=>B())}," Reagendar ordem de serviço # "+a(s.osSelected.protocolo),1)):P("",!0)])])]))}}),ye=U(be,[["__scopeId","data-v-fca4bad3"]]),y=s=>(F("data-v-866b1af4"),s=s(),E(),s),fe={key:0,class:"modal"},$e={class:"card"},we={class:"close__btn"},Ce=y(()=>e("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),xe=[Ce],ke=y(()=>e("h1",null,"Gerenciamento da Ordem de Serviço",-1)),Ae={class:"info"},Oe=y(()=>e("b",null,"Protocolo:",-1)),Be=y(()=>e("b",null,"Servico:",-1)),Te=y(()=>e("b",null,"Tipo de serviço:",-1)),Pe=y(()=>e("b",null,"Agendamento:",-1)),De=y(()=>e("b",null,"Periodo:",-1)),Le=y(()=>e("b",null,"Status:",-1)),Me=y(()=>e("b",null,"Localidade:",-1)),Re={class:"options"},Ie=Z({__name:"ActionsOrder",props:["osSelected","modalStatus"],emits:["closeModal"],setup(s,{emit:A}){const{osSelected:f,modalStatus:$}=s,i=v(!1),p=k=>{L({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/approval-order",method:"POST",data:{order:k},headers:{"Content-Type":"application/json",Authorization:"Bearer "+M.get("token")}}).then(d=>{$.value=!1,f.value=[]}).catch(d=>{console.log(d)})},C=A,x=()=>{C("closeModal")};return(k,d)=>s.modalStatus?(n(),r("div",fe,[e("div",$e,[e("div",we,[(n(),r("svg",{onClick:x,xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},xe))]),ke,e("div",Ae,[e("p",null,[Oe,b(" #"+a(s.osSelected.protocolo),1)]),e("p",null,[Be,b(" "+a(s.osSelected.servico),1)]),e("p",null,[Te,b(" "+a(s.osSelected.subservico),1)]),e("p",null,[Pe,b(" "+a(s.osSelected.hora_agendamento),1)]),e("p",null,[De,b(" "+a(s.osSelected.periodo),1)]),e("p",null,[Le,b(" "+a(s.osSelected.status_order[0].titulo),1)]),e("p",null,[Me,b(" "+a(s.osSelected.localidade),1)])]),e("div",Re,[e("button",{onClick:d[0]||(d[0]=g=>p(s.osSelected.protocolo)),style:{"background-color":"#11B15B"}},"Aprovar entrada"),e("button",{onClick:d[1]||(d[1]=g=>i.value=!0),style:{"background-color":"#53AEE2"}},"Reagendar OS")])]),i.value?(n(),K(ye,{key:0,onCloseAll:d[2]||(d[2]=g=>[x(),i.value=!1]),onCloseModal:d[3]||(d[3]=g=>i.value=!1),osSelected:s.osSelected},null,8,["osSelected"])):P("",!0)])):P("",!0)}}),ze=U(Ie,[["__scopeId","data-v-866b1af4"]]),_=s=>(F("data-v-4a1a3e2c"),s=s(),E(),s),Ve={class:"dashboard__page"},je={class:"options"},Ze={class:"navbar"},Fe={class:"cards"},Ee={class:"card"},Ue=_(()=>e("div",{class:"info"},[e("div",{class:"title"},[e("p",null,"Ordens do dia")]),e("div",{class:"value"},[e("span",null," - "),e("span")])],-1)),Ge={class:"icon"},Ne=["src"],qe={class:"card"},Ye={class:"info"},He=_(()=>e("div",{class:"title"},[e("p",null,"Ordens excedentes")],-1)),Je={class:"value"},Ke=_(()=>e("span",null,null,-1)),We={class:"icon"},Qe=["src"],Xe={class:"card"},et={class:"info"},tt=_(()=>e("div",{class:"title"},[e("p",null,"Ordens aprovadas")],-1)),st={class:"value"},ot=_(()=>e("span",null,null,-1)),at={class:"icon"},lt=["src"],nt={class:"card"},dt={class:"info"},ct=_(()=>e("div",{class:"title"},[e("p",null,"Ordens reagendadas")],-1)),rt={class:"value"},it=_(()=>e("span",null,null,-1)),ut={class:"icon"},vt=["src"],_t={class:"card"},ht={class:"info"},pt=_(()=>e("div",{class:"title"},[e("p",null,"Ordens pendentes")],-1)),gt={class:"value"},mt=_(()=>e("span",null,null,-1)),St={class:"icon"},bt=["src"],yt={class:"actions"},ft={class:"search"},$t={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 513.749 513.749",style:{"enable-background":"new 0 0 513.749 513.749"},"xml:space":"preserve",width:"512",height:"512"},wt=_(()=>e("g",null,[e("path",{d:"M504.352,459.061l-99.435-99.477c74.402-99.427,54.115-240.344-45.312-314.746S119.261-9.277,44.859,90.15   S-9.256,330.494,90.171,404.896c79.868,59.766,189.565,59.766,269.434,0l99.477,99.477c12.501,12.501,32.769,12.501,45.269,0   c12.501-12.501,12.501-32.769,0-45.269L504.352,459.061z M225.717,385.696c-88.366,0-160-71.634-160-160s71.634-160,160-160   s160,71.634,160,160C385.623,314.022,314.044,385.602,225.717,385.696z"})],-1)),Ct=[wt],xt={class:"period"},kt={class:"status"},At=te('<option value="all" data-v-4a1a3e2c>Todos</option><option value="surplus" data-v-4a1a3e2c>Excedentes</option><option value="approved" data-v-4a1a3e2c>Aprovado</option><option value="rescheduled" data-v-4a1a3e2c>Reagendas</option><option value="pending" data-v-4a1a3e2c>Pendentes</option>',5),Ot=[At],Bt=_(()=>e("div",{class:"clear"},[e("button",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24"},[e("path",{d:"m17,0c-3.86,0-7,3.14-7,7s3.14,7,7,7,7-3.14,7-7S20.86,0,17,0Zm0,12c-2.757,0-5-2.243-5-5s2.243-5,5-5,5,2.243,5,5-2.243,5-5,5Zm2.957-6.543l-1.543,1.543,1.543,1.543-1.414,1.414-1.543-1.543-1.543,1.543-1.414-1.414,1.543-1.543-1.543-1.543,1.414-1.414,1.543,1.543,1.543-1.543,1.414,1.414Zm-7.957,9.025c.616.412,1.289.743,2,.995v8.523l-6-4.5v-5.12L0,5.38v-2.38C0,1.346,1.346,0,3,0h8.349c-.706.571-1.325,1.244-1.831,2H3c-.551,0-1,.449-1,1v1.62l8,9v4.88l2,1.5v-5.518Z"})])])],-1)),Tt={class:"table_orders"},Pt=_(()=>e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"left"}},"Protocolo"),e("th",null,"Tipo"),e("th",{style:{"text-align":"left"}},"Serviço"),e("th",null,"Agendamento"),e("th",null,"Período"),e("th",{style:{"text-align":"left"}},"Status"),e("th",null,"Localidade"),e("th",null,"Aberta por"),e("th",null,"Setor"),e("th",null,"Solicitante"),e("th",null,"Aprovado por"),e("th",null,"Ações")])],-1)),Dt={style:{"text-align":"left"}},Lt={style:{"text-align":"left"}},Mt={class:"status"},Rt=_(()=>e("td",null,null,-1)),It=["onClick"],zt=_(()=>e("svg",{class:"actions_order",xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:"512",height:"512"},[e("circle",{cx:"12",cy:"2",r:"2"}),e("circle",{cx:"12",cy:"12",r:"2"}),e("circle",{cx:"12",cy:"22",r:"2"})],-1)),Vt=[zt],jt=Z({__name:"DashboardScheduleCapacity",setup(s){const A=W(),f=v({}),$=()=>{A.setInfoPage({title:"Agenda Técnica Aniel",subtitle:"Aprove o excedente de ordens de serviço que não entraram no sistema por limitação do capacity."})};v("all");const i=v([]),p=new Date,C=p.getFullYear(),x=String(p.getMonth()+1).padStart(2,"0"),k=String(p.getDate()).padStart(2,"0"),d=`${C}-${x}-${k}`,g=v(d),O=v(""),h=v("all"),D=v([]),B=v(!1),l=()=>{L({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/dashboard",method:"GET",params:{period:g.value},headers:{"Content-Type":"application/json",Authorization:"Bearer "+M.get("token")}}).then(c=>{i.value=c.data}).catch(c=>{console.log(c)})},u=R(()=>i.value.reduce((c,o)=>{const S=o.status_order.filter(t=>t.id===15).length;return c+S},0)),m=R(()=>i.value.reduce((c,o)=>{const S=o.status_order.filter(t=>t.id===16).length;return c+S},0)),w=R(()=>{const c=O.value.toString().toLowerCase();return i.value.filter(o=>{const S=o.protocolo.toLowerCase().includes(c);let t=!0;return h.value==="approved"?t=o.status_order[0].id===15:h.value==="rescheduled"?t=o.status_order[0].id===16:h.value==="pending"&&(t=o.status_order[0].id!==15&&o.status_order[0].id!==16),S&&t})});return l(),$(),(c,o)=>{const S=X("router-link");return n(),r("div",Ve,[e("div",je,[e("div",Ze,[I(S,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel",onClick:o[0]||(o[0]=t=>f.value="operational")},{default:G(()=>[b("Operacional")]),_:1}),I(S,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/dashboard",onClick:o[1]||(o[1]=t=>f.value="dashboard")},{default:G(()=>[b("Dashboard")]),_:1})])]),e("div",Fe,[e("div",Ee,[Ue,e("div",Ge,[e("img",{src:T(le),alt:""},null,8,Ne)])]),e("div",qe,[e("div",Ye,[He,e("div",Je,[e("span",null,a(i.value.length),1),Ke])]),e("div",We,[e("img",{src:T(ae),alt:""},null,8,Qe)])]),e("div",Xe,[e("div",et,[tt,e("div",st,[e("span",null,a(u.value),1),ot])]),e("div",at,[e("img",{src:T(oe),alt:""},null,8,lt)])]),e("div",nt,[e("div",dt,[ct,e("div",rt,[e("span",null,a(m.value),1),it])]),e("div",ut,[e("img",{src:T(ne),alt:""},null,8,vt)])]),e("div",_t,[e("div",ht,[pt,e("div",gt,[e("span",null,a(i.value.length-u.value-m.value),1),mt])]),e("div",St,[e("img",{src:T(se),alt:""},null,8,bt)])])]),e("div",yt,[e("div",ft,[(n(),r("svg",$t,Ct)),z(e("input",{type:"number",placeholder:"Pesquisar (Protocolo)","onUpdate:modelValue":o[2]||(o[2]=t=>O.value=t)},null,512),[[N,O.value]])]),e("div",xt,[z(e("input",{type:"date",name:"period","onUpdate:modelValue":o[3]||(o[3]=t=>g.value=t),onChange:l},null,544),[[N,g.value]])]),e("div",kt,[z(e("select",{name:"status",id:"status","onUpdate:modelValue":o[4]||(o[4]=t=>h.value=t)},Ot,512),[[Q,h.value]])]),Bt]),e("div",Tt,[e("table",null,[Pt,e("tbody",null,[(n(!0),r(V,null,j(w.value,(t,Y)=>(n(),r("tr",{key:Y},[e("td",Dt,"# "+a(t.protocolo),1),e("td",null,a(t.servico),1),e("td",Lt,a(t.subservico),1),e("td",null,a(t.hora_agendamento),1),e("td",null,a(t.periodo),1),e("td",null,[e("div",Mt,[e("div",{class:"badge",style:ee({backgroundColor:t.status_order[0].cor_indicativa})},null,4),e("span",null,a(t.status_order[0].titulo),1)])]),e("td",null,a(t.localidade),1),e("td",null,a(t.aberta_por),1),e("td",null,a(t.setor),1),Rt,e("td",null,a(t.aprovador),1),e("td",null,[t.status_order[0].id!=15?(n(),r("div",{key:0,style:{cursor:"pointer"},onClick:Zt=>[D.value=t,B.value=!0]},Vt,8,It)):P("",!0)])]))),128))])])]),I(ze,{modalStatus:B.value,onCloseModal:o[5]||(o[5]=t=>[B.value=!1,l()]),osSelected:D.value},null,8,["modalStatus","osSelected"])])}}}),Et=U(jt,[["__scopeId","data-v-4a1a3e2c"]]);export{Et as default};
