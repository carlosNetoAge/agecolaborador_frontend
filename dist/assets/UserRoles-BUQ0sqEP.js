import{d as T,r as c,z as L,c as l,b as e,g as Z,e as b,G as S,I as F,F as f,f as A,t as d,u,j as p,o as r,H as O,q as $,A as w,k as y,p as D,l as H,_ as J}from"./index-7FJhxvzr.js";import{S as B}from"./SearchLoupe-Di9QutLV.js";import{b as K}from"./powerbi-Bi8rkbQp.js";const P="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20data-name='Layer%201'%20width='647.63626'%20height='632.17383'%20viewBox='0%200%20647.63626%20632.17383'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M687.3279,276.08691H512.81813a15.01828,15.01828,0,0,0-15,15v387.85l-2,.61005-42.81006,13.11a8.00676,8.00676,0,0,1-9.98974-5.31L315.678,271.39691a8.00313,8.00313,0,0,1,5.31006-9.99l65.97022-20.2,191.25-58.54,65.96972-20.2a7.98927,7.98927,0,0,1,9.99024,5.3l32.5498,106.32Z'%20transform='translate(-276.18187%20-133.91309)'%20fill='%23f2f2f2'/%3e%3cpath%20d='M725.408,274.08691l-39.23-128.14a16.99368,16.99368,0,0,0-21.23-11.28l-92.75,28.39L380.95827,221.60693l-92.75,28.4a17.0152,17.0152,0,0,0-11.28028,21.23l134.08008,437.93a17.02661,17.02661,0,0,0,16.26026,12.03,16.78926,16.78926,0,0,0,4.96972-.75l63.58008-19.46,2-.62v-2.09l-2,.61-64.16992,19.65a15.01489,15.01489,0,0,1-18.73-9.95l-134.06983-437.94a14.97935,14.97935,0,0,1,9.94971-18.73l92.75-28.4,191.24024-58.54,92.75-28.4a15.15551,15.15551,0,0,1,4.40966-.66,15.01461,15.01461,0,0,1,14.32032,10.61l39.0498,127.56.62012,2h2.08008Z'%20transform='translate(-276.18187%20-133.91309)'%20fill='%233f3d56'/%3e%3cpath%20d='M398.86279,261.73389a9.0157,9.0157,0,0,1-8.61133-6.3667l-12.88037-42.07178a8.99884,8.99884,0,0,1,5.9712-11.24023l175.939-53.86377a9.00867,9.00867,0,0,1,11.24072,5.9707l12.88037,42.07227a9.01029,9.01029,0,0,1-5.9707,11.24072L401.49219,261.33887A8.976,8.976,0,0,1,398.86279,261.73389Z'%20transform='translate(-276.18187%20-133.91309)'%20fill='%2352ade2'/%3e%3ccircle%20cx='190.15351'%20cy='24.95465'%20r='20'%20fill='%2352ade2'/%3e%3ccircle%20cx='190.15351'%20cy='24.95465'%20r='12.66462'%20fill='%23fff'/%3e%3cpath%20d='M878.81836,716.08691h-338a8.50981,8.50981,0,0,1-8.5-8.5v-405a8.50951,8.50951,0,0,1,8.5-8.5h338a8.50982,8.50982,0,0,1,8.5,8.5v405A8.51013,8.51013,0,0,1,878.81836,716.08691Z'%20transform='translate(-276.18187%20-133.91309)'%20fill='%23e6e6e6'/%3e%3cpath%20d='M723.31813,274.08691h-210.5a17.02411,17.02411,0,0,0-17,17v407.8l2-.61v-407.19a15.01828,15.01828,0,0,1,15-15H723.93825Zm183.5,0h-394a17.02411,17.02411,0,0,0-17,17v458a17.0241,17.0241,0,0,0,17,17h394a17.0241,17.0241,0,0,0,17-17v-458A17.02411,17.02411,0,0,0,906.81813,274.08691Zm15,475a15.01828,15.01828,0,0,1-15,15h-394a15.01828,15.01828,0,0,1-15-15v-458a15.01828,15.01828,0,0,1,15-15h394a15.01828,15.01828,0,0,1,15,15Z'%20transform='translate(-276.18187%20-133.91309)'%20fill='%233f3d56'/%3e%3cpath%20d='M801.81836,318.08691h-184a9.01015,9.01015,0,0,1-9-9v-44a9.01016,9.01016,0,0,1,9-9h184a9.01016,9.01016,0,0,1,9,9v44A9.01015,9.01015,0,0,1,801.81836,318.08691Z'%20transform='translate(-276.18187%20-133.91309)'%20fill='%2352ade2'/%3e%3ccircle%20cx='433.63626'%20cy='105.17383'%20r='20'%20fill='%2352ade2'/%3e%3ccircle%20cx='433.63626'%20cy='105.17383'%20r='12.18187'%20fill='%23fff'/%3e%3c/svg%3e",I="/assets/user-vTumSY3j.png",M=v=>(D("data-v-7d01f016"),v=v(),H(),v),q={key:0,class:"users-role"},E={class:"options"},G={class:"search"},X={class:"users"},Y={class:"info"},Q=["src"],W={class:"actions"},e1=["onClick"],s1=M(()=>e("path",{d:"M9,12c3.309,0,6-2.691,6-6S12.309,0,9,0,3,2.691,3,6s2.691,6,6,6Zm0-10c2.206,0,4,1.794,4,4s-1.794,4-4,4-4-1.794-4-4,1.794-4,4-4Zm1.75,14.22c-.568-.146-1.157-.22-1.75-.22-3.86,0-7,3.14-7,7,0,.552-.448,1-1,1s-1-.448-1-1c0-4.962,4.038-9,9-9,.762,0,1.519,.095,2.25,.284,.535,.138,.856,.683,.719,1.218-.137,.535-.68,.856-1.218,.719Zm12.371-4.341c-1.134-1.134-3.11-1.134-4.243,0l-6.707,6.707c-.755,.755-1.172,1.76-1.172,2.829v1.586c0,.552,.448,1,1,1h1.586c1.069,0,2.073-.417,2.828-1.172l6.707-6.707c.567-.567,.879-1.32,.879-2.122s-.312-1.555-.878-2.121Zm-1.415,2.828l-6.708,6.707c-.377,.378-.879,.586-1.414,.586h-.586v-.586c0-.534,.208-1.036,.586-1.414l6.708-6.707c.377-.378,1.036-.378,1.414,0,.189,.188,.293,.439,.293,.707s-.104,.518-.293,.707Z"},null,-1)),t1=[s1],a1={key:0,class:"not_found"},o1=["src"],l1={key:1,class:"release_reports"},r1={class:"user_info"},n1=["src"],i1={class:"info"},c1={class:"options"},d1={class:"search"},u1={class:"reports"},p1=["src"],v1=["src"],_1=["onClick"],h1=M(()=>e("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm6.2,10.512l-4.426,4.345c-.783.768-1.791,1.151-2.8,1.151-.998,0-1.996-.376-2.776-1.129l-1.899-1.867c-.394-.387-.399-1.02-.012-1.414.386-.395,1.021-.4,1.414-.012l1.893,1.861c.776.75,2.001.746,2.781-.018l4.425-4.344c.393-.388,1.024-.381,1.414.013.387.394.381,1.027-.014,1.414Z"},null,-1)),m1=[h1],g1="Utilize o campo de busca para encontrar usuários.",f1=T({__name:"UserRoles",setup(v){const _=c("users"),o=c({}),h=c(""),m=c([]),k=c(!0),N=L(()=>m.value.filter(t=>t.name.toLowerCase().includes(h.value.toLowerCase()))),R=()=>{w({method:"get",url:"/agereport/management/users/byName/"+h.value,headers:{"Content-Type":"application/json",Authorization:"Bearer "+y.get("token")}}).then(t=>{k.value=!1,t.data.map(a=>{m.value.some(n=>n.id===a.id)||m.value.push(a)})}).catch(t=>{console.log(t)})},x=c([]),g=c(""),U=()=>{w({method:"get",url:"/agereport/management/users/roles/reports",headers:{"Content-Type":"application/json",Authorization:"Bearer "+y.get("token")}}).then(t=>{x.value=t.data}).catch(t=>{console.log(t)})},z=L(()=>x.value.filter(t=>t.nome.toLowerCase().includes(g.value.toLowerCase()))),C=t=>{var n,s;const a=(s=(n=o.value)==null?void 0:n.age_report_roles)!=null&&s.relatorios_liberados?JSON.parse(o.value.age_report_roles.relatorios_liberados):[];if(a.length>0)return a.some(i=>i==t.id)},V=t=>{const a=C(t)?"remove":"insert";w({method:"post",url:"/agereport/management/users/roles/",headers:{"Content-Type":"application/json",Authorization:"Bearer "+y.get("token")},data:{command:a,userId:o.value.id,level:o.age_report_roles?o.age_report_roles.nivel:"usuario",report:[t.id]}}).then(n=>{o.value.age_report_roles||(o.value.age_report_roles={relatorios_liberados:"[]"});let s=JSON.parse(o.value.age_report_roles.relatorios_liberados);a==="insert"?s.push(t.id):s=s.filter(i=>i!==t.id),o.value.age_report_roles.relatorios_liberados=JSON.stringify(s)}).catch(n=>{console.log(n)})};return(t,a)=>{var n;return r(),l(f,null,[_.value=="users"?(r(),l("div",q,[e("div",E,[e("div",G,[Z(B),b(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>h.value=s),onKeyup:a[1]||(a[1]=F(s=>R(),["enter"])),placeholder:"Procure pelo nome do usuário..."},null,544),[[S,h.value]])])]),e("div",X,[(r(!0),l(f,null,A(N.value,(s,i)=>(r(),l("div",{class:"user",key:i},[e("div",Y,[e("img",{src:u(I),alt:""},null,8,Q),e("span",null,d(s.name),1),e("span",null,d(s.login),1)]),e("div",W,[(r(),l("svg",{onClick:j=>[_.value="release",o.value=s,U()],xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},t1,8,e1))])]))),128))]),m.value.length==0?(r(),l("div",a1,[e("h1",null,d(k.value?g1:"Nenhum usuário encontrado."),1),e("img",{src:u(P),alt:""},null,8,o1)])):p("",!0)])):p("",!0),_.value=="release"?(r(),l("div",l1,[e("button",{class:"back",onClick:a[2]||(a[2]=s=>_.value="users")}," Voltar "),e("div",r1,[e("img",{src:u(I),alt:""},null,8,n1),e("div",i1,[e("p",null,d(o.value.name),1),e("p",null,d(o.value.login),1)]),e("span",null,d((n=o.value.age_report_roles)!=null&&n.nivel?o.value.age_report_roles.nivel:"Usuário"),1)]),e("div",c1,[e("div",d1,[Z(B),b(e("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=s=>g.value=s),placeholder:"Procure pelo nome do relatório..."},null,512),[[S,g.value]])])]),e("div",u1,[(r(!0),l(f,null,A(z.value,(s,i)=>(r(),l("div",{class:"report",key:i},[s.tipo=="relatorio"?(r(),l("img",{key:0,src:u(O),alt:""},null,8,p1)):p("",!0),s.tipo=="dashboard"?(r(),l("img",{key:1,src:u(K),alt:""},null,8,v1)):p("",!0),e("span",null,d(s.nome),1),(r(),l("svg",{onClick:j=>V(s),class:$({active:C(s)}),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},m1,10,_1))]))),128))])])):p("",!0)],64)}}}),x1=J(f1,[["__scopeId","data-v-7d01f016"]]);export{x1 as default};
