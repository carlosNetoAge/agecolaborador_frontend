import{d as N,a as i,p as T,R as V,l as n,q as e,F as D,x as z,A as X,C as B,D as w,o as c,L as S,E as t,N as H,_ as R,k as U,y as I,z as j,J as M,K as q,S as k,G,H as J}from"./index-DnNYaEyR.js";const K="/assets/morning-CSKRONwJ.png",Y="/assets/afternoon-CHR2RdtE.png",Q={class:"calendar"},W={class:"months"},Z=["onClick"],aa=["onClick"],ea={class:"dayName"},ta={class:"dayNumber"},sa={key:0,class:"dots-container"},oa=H('<div class="dot" data-v-e79afc52></div><div class="dot" data-v-e79afc52></div><div class="dot" data-v-e79afc52></div><div class="dot" data-v-e79afc52></div><div class="dot" data-v-e79afc52></div>',5),na=[oa],ca=N({__name:"CalendarOperational",props:{statusCalendar:Boolean},emits:["updateData"],setup(_,{emit:$}){const L=_,v=i({}),h=$,m=new Date,f=i(r(m)),g=i(m.getDate()),x=s=>{if(!s){s=new Date;const u=s.getFullYear(),o=String(s.getMonth()+1).padStart(2,"0"),d=String(s.getDate()).padStart(2,"0"),E=`${u}-${o}-${d}`;return h("updateData",E)}return h("updateData",s)},p=async()=>{B({method:"get",url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/capacity/calendar",headers:{"Content-Type":"application/json",Authorization:"Bearer "+w.get("token")}}).then(s=>{v.value=s.data,x(),P()})};function r(s){const u={month:"long"},o=s.toLocaleString("pt-BR",u);return o.charAt(0).toUpperCase()+o.slice(1)}const C=i(!1),a=i(0),y=i(0),l=i(null),O=s=>{var u,o;C.value=!0,a.value=s.pageX-(((u=l.value)==null?void 0:u.offsetLeft)||0),y.value=((o=l.value)==null?void 0:o.scrollLeft)||0},A=s=>{var d;if(!C.value)return;s.preventDefault();const o=(s.pageX-(((d=l.value)==null?void 0:d.offsetLeft)||0)-a.value)*2;l.value&&(l.value.scrollLeft=y.value-o)},b=()=>{C.value=!1},P=()=>{l.value&&(l.value.addEventListener("mousemove",A),l.value.addEventListener("mouseup",b),l.value.addEventListener("mouseleave",b))};return T(()=>{p()}),V(()=>{l.value&&(l.value.removeEventListener("mousemove",A),l.value.removeEventListener("mouseup",b),l.value.removeEventListener("mouseleave",b))}),(s,u)=>(c(),n("div",Q,[e("div",W,[(c(!0),n(D,null,z(v.value,(o,d)=>(c(),n("div",{key:d,class:S({month:!0,select:d===f.value}),onClick:E=>[f.value=d,g.value=0]},t(d),11,Z))),128))]),e("div",{ref_key:"container",ref:l,class:"days",onMousedown:O},[(c(!0),n(D,null,z(v.value[f.value],(o,d)=>(c(),n("div",{class:"day",key:d},[e("div",{class:S(["box",{selectedDay:g.value===o.day}]),onClick:E=>[g.value=o.day,x(o.extense)]},[e("span",ea,t(o.name),1),e("span",ta,t(o.day),1)],10,aa)]))),128))],544),L.statusCalendar?X("",!0):(c(),n("section",sa,na))]))}}),la=R(ca,[["__scopeId","data-v-e79afc52"]]),F=_=>(G("data-v-883ba32e"),_=_(),J(),_),da={class:"options"},ia={class:"container_content"},ra={class:"capacity"},ua={class:"period"},va={class:"header"},pa=F(()=>e("div",{class:"title"}," Capacidade período Manhã ",-1)),_a=["src"],ha={class:"services"},fa={class:"title"},ga={class:"progress"},ya=["value","max"],ma={class:"info"},Ca={key:0},ka={key:1},Da={class:"period"},xa={class:"header"},ba=F(()=>e("div",{class:"title"}," Capacidade período Tarde ",-1)),za=["src"],Sa={class:"services"},$a={class:"title"},Ea={class:"progress"},La=["value","max"],Aa={class:"info"},Ia={key:0},Ma={key:1},Na=N({__name:"ScheduleCapacity",setup(_){const $=U();(()=>{$.setInfoPage({title:"Agenda Técnica Aniel",subtitle:"Acompanhe a capacidade de agendamento em tempo real"})})();const v=i(!1),h=i({}),m=i(),f=p=>{v.value=!1,m.value=p,B({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/capacity",params:{period:p},method:"GET",headers:{Authorization:"Bearer "+w.get("token")}}).then(r=>{v.value=!0,h.value=r.data}).catch(r=>{console.log(r)})},g=p=>p.split(":").slice(0,2).join(":"),x=i("operational");return setInterval(()=>{f(m.value)},1e4),(p,r)=>{const C=q("router-link");return c(),n(D,null,[e("div",da,[I(C,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel",onClick:r[0]||(r[0]=a=>x.value="operational")},{default:j(()=>[k("Operacional")]),_:1})]),I(la,{onUpdateData:f,statusCalendar:v.value},null,8,["statusCalendar"]),e("div",ia,[e("div",ra,[e("div",ua,[e("div",va,[pa,e("img",{src:M(K),alt:""},null,8,_a)]),e("div",ha,[(c(!0),n(D,null,z(h.value.manha||[],(a,y)=>(c(),n("div",{class:"service",key:y},[e("div",fa,[e("h3",null,t(a.servico)+" "+t(a.status=="fechada"?"- Fechada às "+g(a.hora_fechamento):""),1),e("p",null,t(a.motivo_fechamento),1)]),e("div",ga,[e("progress",{class:S({closed:a.status=="fechada"}),value:a.utilizado,max:a.capacidade},null,10,ya),e("div",ma,[a.status=="aberta"?(c(),n("span",Ca,[e("b",null,t(Math.abs(a.capacidade-a.utilizado)),1),k(" - "+t(a.capacidade-a.utilizado>=0?"Disponíveis":"Excedentes"),1)])):(c(),n("span",ka,[e("b",null,t(a.capacidade-a.utilizado>=0?0:Math.abs(a.capacidade-a.utilizado)),1),k(" - "+t(a.capacidade-a.utilizado>=0?"Disponíveis":"Excedentes"),1)]))])])]))),128))])]),e("div",Da,[e("div",xa,[ba,e("img",{src:M(Y),alt:""},null,8,za)]),e("div",Sa,[(c(!0),n(D,null,z(h.value.tarde||[],(a,y)=>(c(),n("div",{class:"service",key:y},[e("div",$a,[e("h3",null,t(a.servico)+" "+t(a.status=="fechada"?"- Fechada às "+g(a.hora_fechamento):""),1),e("p",null,t(a.motivo_fechamento),1)]),e("div",Ea,[e("progress",{class:S({closed:a.status=="fechada"}),value:a.utilizado,max:a.capacidade},null,10,La),e("div",Aa,[a.status=="aberta"?(c(),n("span",Ia,[e("b",null,t(Math.abs(a.capacidade-a.utilizado)),1),k(" - "+t(a.capacidade-a.utilizado>=0?"Disponíveis":"Excedentes"),1)])):(c(),n("span",Ma,[e("b",null,t(a.capacidade-a.utilizado>=0?0:Math.abs(a.capacidade-a.utilizado)),1),k(" - "+t(a.capacidade-a.utilizado>=0?"Disponíveis":"Excedentes"),1)]))])])]))),128))])])])])],64)}}}),wa=R(Na,[["__scopeId","data-v-883ba32e"]]);export{wa as default};
