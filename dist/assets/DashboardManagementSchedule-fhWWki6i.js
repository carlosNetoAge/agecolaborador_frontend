import{d as F,r as p,o as c,c as d,b as t,F as f,f as k,u as l,t as a,e as B,G as I,E as i,q as E,j as q,A as w,k as S,p as R,l as Z,_ as N,i as H,g as M,h as T,B as K,a2 as Q,n as Y}from"./index-MZEGW7ky.js";import{m as $,a as U}from"./afternoon-D3aPXxoM.js";import{s as J,t as W}from"./technician-ToY7zxws.js";const tt="/assets/deadline-Bao4OFcx.png",V="/assets/team-CaB8K89L.png",et="/assets/description-CXZGHKMm.png",st="/assets/unlock-Cjv9w65z.png",ot="/assets/lock-BDpS9MGs.png",D="/assets/unsafe-B9ScVL9a.png",P="/assets/capacity-CfsXMRHo.png",L="/assets/safe-deYX1TQc.png",at="/assets/cogwheel-DMTXTN52.png",nt="/assets/sla-DFzrdN2_.png",lt="/assets/calculator-DvS-yx5U.png",s=m=>(R("data-v-895bade4"),m=m(),Z(),m),ct={class:"content__capacity"},dt={class:"days"},it={class:"action_alter_capacity"},_t=["onClick"],ut=["src"],rt=["src"],ht=["src"],vt={class:"services-container"},pt={class:"services"},gt={key:0},ft=s(()=>t("th",{style:{width:"5%","text-align":"center"}},"Período",-1)),mt=s(()=>t("th",null,"Serviço",-1)),bt=s(()=>t("th",null,"Capacidade",-1)),yt=s(()=>t("th",null,"Agendados",-1)),xt=s(()=>t("th",null,"Líquido",-1)),Ct=s(()=>t("th",null,"Status",-1)),kt=s(()=>t("th",null,"Motivo fechamento",-1)),wt=s(()=>t("th",null,"Data e hora do fechamento",-1)),St=s(()=>t("th",null,"Alterado por",-1)),Dt=s(()=>t("th",null,"ações",-1)),zt=[ft,mt,bt,yt,xt,Ct,kt,wt,St,Dt],At={key:1},Bt=s(()=>t("th",{style:{width:"5%","text-align":"center"}},"Período",-1)),It=s(()=>t("th",null,"Serviço",-1)),Mt=s(()=>t("th",null,"Capacidade atual",-1)),Tt=s(()=>t("th",null,"Líquido",-1)),$t=s(()=>t("th",null,"Técnicos",-1)),Ut=s(()=>t("th",null,"Quantidade de serviços",-1)),Vt=s(()=>t("th",null,"Capacidade calculada",-1)),Pt=s(()=>t("th",null,"Alterado por",-1)),Lt=[Bt,It,Mt,Tt,$t,Ut,Vt,Pt],Ft={style:{width:"5%"}},Nt=["src"],Ot={style:{"text-align":"left"}},jt={class:"flex"},Gt=["src"],Xt={class:"flex"},Et=["src"],qt={class:"flex"},Rt=["src"],Zt={class:"flex"},Ht=["src"],Kt={class:"flex"},Qt=["src"],Yt={class:"flex"},Jt=["src"],Wt={class:"flex"},te=["src"],ee={class:"actions_table"},se=["onClick"],oe=s(()=>t("circle",{cx:"12",cy:"2",r:"2"},null,-1)),ae=s(()=>t("circle",{cx:"12",cy:"12",r:"2"},null,-1)),ne=s(()=>t("circle",{cx:"12",cy:"22",r:"2"},null,-1)),le=[oe,ae,ne],ce={style:{width:"5%"}},de=["src"],ie={style:{"text-align":"left"}},_e={class:"flex"},ue=["src"],re={class:"flex"},he=["src"],ve={class:"flex"},pe=["src"],ge=["onUpdate:modelValue"],fe={class:"flex"},me=["src"],be=["onUpdate:modelValue"],ye={class:"flex"},xe=["src"],Ce={class:"flex"},ke=["src"],we={key:0,class:"modal"},Se={class:"card"},De={class:"close__btn"},ze=s(()=>t("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),Ae=[ze],Be=s(()=>t("h3",null,"Alterar status da agenda",-1)),Ie={class:"info"},Me=s(()=>t("b",null,"Data:",-1)),Te=s(()=>t("b",null,"Servico:",-1)),$e=s(()=>t("b",null,"Capacidade:",-1)),Ue=s(()=>t("b",null,"Utilizado:",-1)),Ve=s(()=>t("b",null,"Disponível:",-1)),Pe=s(()=>t("b",null,"Status:",-1)),Le=s(()=>t("b",null,"Motivo do fechamento:",-1)),Fe=s(()=>t("b",null,"Data e hora:",-1)),Ne=s(()=>t("b",null,"Alterado por:",-1)),Oe={class:"action"},je=F({__name:"StatusCapacityManagement",setup(m){const g=p(!1),b=p([]),n=p({});p(!1);const v=p([]),u=p(-1),y=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],O=o=>{const _=new Date(o),r=_.getUTCDate(),h=y[_.getUTCMonth()],e=_.getUTCFullYear();return`${r} de ${h} de ${e}`},x=()=>{w({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/schedule",method:"GET",headers:{Authorization:"Bearer "+S.get("token")}}).then(o=>{b.value=o.data}).catch(o=>{console.log(o)})};x();const z=o=>o.capacidade-o.utilizado<0||o.capacidade-o.utilizado<5?D:L;setInterval(()=>{u.value==-1&&x()},5e3);const j=()=>{w({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/schedule/alter-status",method:"POST",headers:{Authorization:"Bearer "+S.get("token")},data:{schedule_id:n.value.id,command:n.value.status=="aberta"?"close":"reopen",motive_id:1}}).then(()=>{x(),g.value=!1}).catch(o=>{console.log(o)})},G=()=>{v.value.forEach(o=>{o.novo_contingente===void 0&&(o.contingente!=null?o.novo_contingente=o.contingente:o.novo_contingente=o.capacidade/2),o.novo_contingente_servicos===void 0&&(o.contingente_servicos!=null?o.novo_contingente_servicos=o.contingente_servicos:o.novo_contingente_servicos=2),o.nova_capacidade===void 0&&(o.nova_capacidade=o.capacidade)})},X=()=>{w({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/schedule/alter-capacity",method:"POST",headers:{Authorization:"Bearer "+S.get("token")},data:{schedule:v.value}}).then(o=>{x(),u.value=-1,v.value=[]}).catch(o=>{})};return(o,_)=>(c(),d(f,null,[t("div",ct,[t("div",dt,[(c(!0),d(f,null,k(b.value,(r,h)=>(c(),d("div",{class:"day",key:h},[t("div",it,[u.value!=h?(c(),d("button",{key:0,onClick:e=>[v.value=r,u.value=h,G()]},[t("img",{src:l(at),alt:""},null,8,ut)],8,_t)):(c(),d(f,{key:1},[t("button",{onClick:_[0]||(_[0]=e=>[u.value=-1,v.value=[]])},[t("img",{src:l(D),alt:""},null,8,rt)]),t("button",{onClick:X},[t("img",{src:l(L),alt:""},null,8,ht)])],64))]),t("h4",null,a(r[0].dia_semana.charAt(0).toUpperCase()+r[0].dia_semana.slice(1))+", "+a(O(h)),1),t("div",vt,[t("div",pt,[t("table",null,[t("thead",null,[u.value!=h?(c(),d("tr",gt,zt)):(c(),d("tr",At,Lt))]),t("tbody",null,[u.value!=h?(c(!0),d(f,{key:0},k(r,(e,A)=>(c(),d("tr",{key:A},[t("td",Ft,[t("img",{src:e.periodo=="manha"?l($):l(U),alt:""},null,8,Nt)]),t("td",Ot,a(e.servico),1),t("td",null,[t("div",jt,[t("img",{src:l(P),alt:""},null,8,Gt),t("span",null,a(e.capacidade),1)])]),t("td",null,[t("div",Xt,[t("img",{src:l(J),alt:""},null,8,Et),t("span",null,a(e.utilizado),1)])]),t("td",null,[t("div",qt,[t("img",{src:z(e),alt:""},null,8,Rt),t("span",null,a(e.capacidade-e.utilizado),1)])]),t("td",null,[t("div",Zt,[t("img",{style:{width:"1vw"},src:e.status=="aberta"?l(st):l(ot),alt:""},null,8,Ht),t("span",null,a(e.status),1)])]),t("td",null,[t("div",Kt,[t("img",{src:l(et),alt:""},null,8,Qt),t("span",null,a(e.motivo_fechamento!=null?e.motivo_fechamento:"-"),1)])]),t("td",null,[t("div",Yt,[t("img",{src:l(tt),alt:""},null,8,Jt),t("span",null,a(e.data_fechamento!=null?e.data_fechamento+" ás "+e.hora_fechamento:"-"),1)])]),t("td",null,[t("div",Wt,[t("img",{src:l(V),alt:""},null,8,te),t("span",null,a(e.user.nome),1)])]),t("td",ee,[(c(),d("svg",{onClick:C=>[g.value=!0,n.value=e],xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:"512",height:"512"},le,8,se))])]))),128)):(c(!0),d(f,{key:1},k(v.value,(e,A)=>(c(),d("tr",{key:e.id},[t("td",ce,[t("img",{src:e.periodo=="manha"?l($):l(U),alt:""},null,8,de)]),t("td",ie,a(e.servico),1),t("td",null,[t("div",_e,[t("img",{src:l(P),alt:""},null,8,ue),t("span",null,a(e.capacidade),1)])]),t("td",null,[t("div",re,[t("img",{src:z(e),alt:""},null,8,he),t("span",null,a(e.capacidade-e.utilizado),1)])]),t("td",null,[t("div",ve,[t("img",{src:l(W),alt:""},null,8,pe),B(t("input",{type:"number","onUpdate:modelValue":C=>e.novo_contingente=C},null,8,ge),[[I,e.novo_contingente]])])]),t("td",null,[t("div",fe,[t("img",{src:l(nt),alt:""},null,8,me),B(t("input",{type:"number","onUpdate:modelValue":C=>e.novo_contingente_servicos=C},null,8,be),[[I,e.novo_contingente_servicos]])])]),t("td",null,[t("div",ye,[t("img",{src:l(lt),alt:""},null,8,xe),t("span",null,a(e.nova_capacidade=e.novo_contingente*e.novo_contingente_servicos),1)])]),t("td",null,[t("div",Ce,[t("img",{src:l(V),alt:""},null,8,ke),t("span",null,a(e.user.nome),1)])])]))),128))])])])])]))),128))])]),g.value?(c(),d("div",we,[t("div",Se,[t("div",De,[(c(),d("svg",{onClick:_[1]||(_[1]=r=>g.value=!1),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},Ae))]),Be,t("div",Ie,[t("p",null,[Me,i(" #"+a(n.value.data),1)]),t("p",null,[Te,i(" "+a(n.value.servico),1)]),t("p",null,[$e,i(" "+a(n.value.capacidade),1)]),t("p",null,[Ue,i(" "+a(n.value.utilizado),1)]),t("p",null,[Ve,i(" "+a(n.value.capacidade-n.value.utilizado),1)]),t("p",null,[Pe,i(" "+a(n.value.status),1)]),t("p",null,[Le,i(" "+a(n.value.motivo_fechamento!=null?n.value.motivo_fechamento:"-"),1)]),t("p",null,[Fe,i(" "+a(n.value.data_fechamento!=null?n.value.data_fechamento+" ás "+n.value.hora_fechamento:"-"),1)]),t("p",null,[Ne,i(" "+a(n.value.user.nome),1)])]),t("div",Oe,[t("button",{onClick:_[2]||(_[2]=r=>j()),class:E(n.value.status=="aberta"?"closed":"open")},a(n.value.status=="aberta"?"Fechar agenda":"Reabrir agenda"),3)])])])):q("",!0)],64))}}),Ge=N(je,[["__scopeId","data-v-895bade4"]]),Xe={class:"options"},Ee={class:"content__dashboard"},qe={class:"page__actual"},Re=F({__name:"DashboardManagementSchedule",setup(m){const g=H(),b=p(Ge);return(()=>{g.setInfoPage({title:"Agenda Operacional Aniel",subtitle:"Acompanhe o status de agendamento em tempo real"})})(),(v,u)=>{const y=Y("router-link");return c(),d(f,null,[t("div",Xe,[M(y,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/dashboard"},{default:T(()=>[i("Dashboard")]),_:1}),M(y,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/gerenciamento"},{default:T(()=>[i("Gerenciamento")]),_:1})]),t("div",Ee,[t("div",qe,[(c(),K(Q(b.value)))])])],64)}}}),Qe=N(Re,[["__scopeId","data-v-15aa1fc4"]]);export{Qe as default};
