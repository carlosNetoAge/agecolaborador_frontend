import{d as k,a as m,o as c,l as i,q as e,F as f,x as S,E as t,J as d,S as l,L as $,A as P,C as w,D,G as M,H as O,_ as A,k as T,y as b,z as x,P as L,V as U,K as V}from"./index-9ohaK8M2.js";import{m as F,a as j}from"./afternoon-CljNP9Gt.js";import{s as G,d as N}from"./danger-CZo0IAqw.js";const E="/assets/deadline-Bao4OFcx.png",Z="/assets/team-CaB8K89L.png",H="/assets/description-PgO1T28h.png",K="/assets/closed-BSiUwP3b.png",R="/assets/close-DxaXsney.png",X="/assets/open-BjdxAZdB.png",Y="/assets/capacity-D_d0aGd1.png",q="/assets/explosion-COynLYHs.png",J="/assets/check-CW67wavV.png",n=p=>(M("data-v-bd9f1071"),p=p(),O(),p),W={class:"content__capacity"},Q={class:"days"},ee={class:"services-container"},te={class:"services"},ae=n(()=>e("thead",null,[e("tr",null,[e("th",{style:{width:"5%","text-align":"center"}},"Período"),e("th",null,"Serviço"),e("th",null,"Capacidade"),e("th",null,"Agendados"),e("th",null,"Disponíveis"),e("th",null,"Status"),e("th",null,"Motivo fechamento"),e("th",null,"Data e hora do fechamento"),e("th",null,"Alterado por"),e("th",null,"ações")])],-1)),se={style:{width:"5%"}},oe=["src"],ne={style:{"text-align":"left"}},le={class:"flex"},ce=["src"],de={class:"flex"},ie=["src"],ue={class:"flex"},re=["src"],_e={class:"flex"},he=["src"],pe={class:"flex"},ve=["src"],ge={class:"flex"},me=["src"],fe={class:"flex"},be=["src"],xe={class:"actions_table"},ye=["onClick"],Ce=n(()=>e("circle",{cx:"12",cy:"2",r:"2"},null,-1)),Se=n(()=>e("circle",{cx:"12",cy:"12",r:"2"},null,-1)),we=n(()=>e("circle",{cx:"12",cy:"22",r:"2"},null,-1)),De=[Ce,Se,we],ke={key:0,class:"modal"},Ae={class:"card"},ze={class:"close__btn"},Be=n(()=>e("path",{d:"m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm3.707,14.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2.293-2.293-2.293,2.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.293-2.293-2.293-2.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.293,2.293,2.293-2.293c.391-.391,1.023-.391,1.414,0s.391,1.023,0,1.414l-2.293,2.293,2.293,2.293Z"},null,-1)),Ie=[Be],$e=n(()=>e("h3",null,"Alterar status da agenda",-1)),Pe={class:"info"},Me=n(()=>e("b",null,"Data:",-1)),Oe=n(()=>e("b",null,"Servico:",-1)),Te=n(()=>e("b",null,"Capacidade:",-1)),Le=n(()=>e("b",null,"Utilizado:",-1)),Ue=n(()=>e("b",null,"Disponível:",-1)),Ve=n(()=>e("b",null,"Status:",-1)),Fe=n(()=>e("b",null,"Motivo do fechamento:",-1)),je=n(()=>e("b",null,"Data e hora:",-1)),Ge=n(()=>e("b",null,"Alterado por:",-1)),Ne={class:"action"},Ee=k({__name:"StatusCapacityManagement",setup(p){const h=m(!1),v=m([]),a=m({}),y=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],C=o=>{const u=new Date(o),_=u.getUTCDate(),g=y[u.getUTCMonth()],s=u.getUTCFullYear();return`${_} de ${g} de ${s}`},r=()=>{w({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/schedule",method:"GET",headers:{Authorization:"Bearer "+D.get("token")}}).then(o=>{v.value=o.data}).catch(o=>{console.log(o)})};r(),setInterval(()=>{r()},5e3);const z=o=>o.capacidade===o.utilizado?R:o.capacidade-o.utilizado<0?q:o.capacidade-o.utilizado<5?N:J,B=()=>{w({url:"https://v2.ageportal.agetelecom.com.br/integrator/aniel/management-schedule/schedule/alter-status",method:"POST",headers:{Authorization:"Bearer "+D.get("token")},data:{schedule_id:a.value.id,command:a.value.status=="aberta"?"close":"reopen",motive_id:1}}).then(()=>{r(),h.value=!1}).catch(o=>{console.log(o)})};return(o,u)=>(c(),i(f,null,[e("div",W,[e("div",Q,[(c(!0),i(f,null,S(v.value,(_,g)=>(c(),i("div",{class:"day",key:g},[e("span",null,t(_[0].dia_semana.charAt(0).toUpperCase()+_[0].dia_semana.slice(1))+", "+t(C(g)),1),e("div",ee,[e("div",te,[e("table",null,[ae,e("tbody",null,[(c(!0),i(f,null,S(_,(s,I)=>(c(),i("tr",{key:I},[e("td",se,[e("img",{src:s.periodo=="manha"?d(F):d(j),alt:""},null,8,oe)]),e("td",ne,t(s.servico),1),e("td",null,[e("div",le,[e("img",{src:d(Y),alt:""},null,8,ce),e("span",null,t(s.capacidade),1)])]),e("td",null,[e("div",de,[e("img",{src:d(G),alt:""},null,8,ie),e("span",null,t(s.utilizado),1)])]),e("td",null,[e("div",ue,[e("img",{src:z(s),alt:""},null,8,re),e("span",null,t(Math.abs(s.capacidade-s.utilizado)),1)])]),e("td",null,[e("div",_e,[e("img",{src:s.status=="aberta"?d(X):d(K),alt:""},null,8,he),e("span",null,t(s.status),1)])]),e("td",null,[e("div",pe,[e("img",{src:d(H),alt:""},null,8,ve),e("span",null,t(s.motivo_fechamento!=null?s.motivo_fechamento:"-"),1)])]),e("td",null,[e("div",ge,[e("img",{src:d(E),alt:""},null,8,me),e("span",null,t(s.data_fechamento!=null?s.data_fechamento+" ás "+s.hora_fechamento:"-"),1)])]),e("td",null,[e("div",fe,[e("img",{src:d(Z),alt:""},null,8,be),e("span",null,t(s.user.nome),1)])]),e("td",xe,[(c(),i("svg",{onClick:Ye=>[h.value=!0,a.value=s],xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:"512",height:"512"},De,8,ye))])]))),128))])])])])]))),128))])]),h.value?(c(),i("div",ke,[e("div",Ae,[e("div",ze,[(c(),i("svg",{onClick:u[0]||(u[0]=_=>h.value=!1),xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:"512",height:"512"},Ie))]),$e,e("div",Pe,[e("p",null,[Me,l(" #"+t(a.value.data),1)]),e("p",null,[Oe,l(" "+t(a.value.servico),1)]),e("p",null,[Te,l(" "+t(a.value.capacidade),1)]),e("p",null,[Le,l(" "+t(a.value.utilizado),1)]),e("p",null,[Ue,l(" "+t(a.value.capacidade-a.value.utilizado),1)]),e("p",null,[Ve,l(" "+t(a.value.status),1)]),e("p",null,[Fe,l(" "+t(a.value.motivo_fechamento!=null?a.value.motivo_fechamento:"-"),1)]),e("p",null,[je,l(" "+t(a.value.data_fechamento!=null?a.value.data_fechamento+" ás "+a.value.hora_fechamento:"-"),1)]),e("p",null,[Ge,l(" "+t(a.value.user.nome),1)])]),e("div",Ne,[e("button",{onClick:u[1]||(u[1]=_=>B()),class:$(a.value.status=="aberta"?"closed":"open")},t(a.value.status=="aberta"?"Fechar agenda":"Reabrir agenda"),3)])])])):P("",!0)],64))}}),Ze=A(Ee,[["__scopeId","data-v-bd9f1071"]]),He={class:"options"},Ke={class:"content__dashboard"},Re={class:"page__actual"},Xe=k({__name:"DashboardManagementSchedule",setup(p){const h=T(),v=m(Ze);return(()=>{h.setInfoPage({title:"Agenda Operacional Aniel",subtitle:"Acompanhe o status de agendamento em tempo real"})})(),(y,C)=>{const r=V("router-link");return c(),i(f,null,[e("div",He,[b(r,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel"},{default:x(()=>[l("Capacidade")]),_:1}),b(r,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/dashboard"},{default:x(()=>[l("Dashboard")]),_:1}),b(r,{"exact-active-class":"select",to:"/ageIntegra/agenda-aniel/gerenciamento"},{default:x(()=>[l("Gerenciamento")]),_:1})]),e("div",Ke,[e("div",Re,[(c(),L(U(v.value)))])])],64)}}}),Qe=A(Xe,[["__scopeId","data-v-113f932b"]]);export{Qe as default};
